import{f as Ce,h as _e,s as J,_ as h,r as m,o as Ee,Q as Te,V as $e,p as be,b as we,F as ze,j as e,q as Re,t as Se,W as te,a as U,i as O,T as y,R as ne,L as se,c as re,m as ie,B as S,u as Ne,M as Me,d as De,C as Ie,H as Ae,P as Le,J as l,N as Pe,X as ae,e as oe}from"./index-iyKQiyI6.js";import{a as ke,d as qe}from"./ArrowForwardIos-iuEUdqgN.js";import{c as Fe,C as We,b as B,a as He}from"./CardHeader-0Uw6o6dI.js";import{C as Ue}from"./CardMedia-pKATFb6p.js";import{L as Oe}from"./LinearProgress-P1GeTCUB.js";function Qe(t){return Ce("MuiCollapse",t)}_e("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ge=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Be=t=>{const{orientation:n,classes:i}=t,a={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return Se(a,Qe,i)},Je=J("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:i}=t;return[n.root,n[i.orientation],i.state==="entered"&&n.entered,i.state==="exited"&&!i.in&&i.collapsedSize==="0px"&&n.hidden]}})(({theme:t,ownerState:n})=>h({height:0,overflow:"hidden",transition:t.transitions.create("height")},n.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},n.state==="entered"&&h({height:"auto",overflow:"visible"},n.orientation==="horizontal"&&{width:"auto"}),n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&{visibility:"hidden"})),Ve=J("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,n)=>n.wrapper})(({ownerState:t})=>h({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Xe=J("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,n)=>n.wrapperInner})(({ownerState:t})=>h({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),le=m.forwardRef(function(n,i){const a=Ee({props:n,name:"MuiCollapse"}),{addEndListener:d,children:N,className:C,collapsedSize:f="0px",component:u,easing:_,in:E,onEnter:c,onEntered:q,onEntering:T,onExit:F,onExited:Q,onExiting:M,orientation:D="vertical",style:I,timeout:g=Te.standard,TransitionComponent:A=$e}=a,Z=be(a,Ge),v=h({},a,{orientation:D,collapsedSize:f}),$=Be(v),b=we(),L=m.useRef(),x=m.useRef(null),P=m.useRef(),r=typeof f=="number"?`${f}px`:f,o=D==="horizontal",w=o?"width":"height";m.useEffect(()=>()=>{clearTimeout(L.current)},[]);const z=m.useRef(null),W=ze(i,z),R=s=>p=>{if(s){const j=z.current;p===void 0?s(j):s(j,p)}},G=()=>x.current?x.current[o?"clientWidth":"clientHeight"]:0,me=R((s,p)=>{x.current&&o&&(x.current.style.position="absolute"),s.style[w]=r,c&&c(s,p)}),xe=R((s,p)=>{const j=G();x.current&&o&&(x.current.style.position="");const{duration:k,easing:H}=te({style:I,timeout:g,easing:_},{mode:"enter"});if(g==="auto"){const ee=b.transitions.getAutoHeightDuration(j);s.style.transitionDuration=`${ee}ms`,P.current=ee}else s.style.transitionDuration=typeof k=="string"?k:`${k}ms`;s.style[w]=`${j}px`,s.style.transitionTimingFunction=H,T&&T(s,p)}),fe=R((s,p)=>{s.style[w]="auto",q&&q(s,p)}),ge=R(s=>{s.style[w]=`${G()}px`,F&&F(s)}),je=R(Q),ve=R(s=>{const p=G(),{duration:j,easing:k}=te({style:I,timeout:g,easing:_},{mode:"exit"});if(g==="auto"){const H=b.transitions.getAutoHeightDuration(p);s.style.transitionDuration=`${H}ms`,P.current=H}else s.style.transitionDuration=typeof j=="string"?j:`${j}ms`;s.style[w]=r,s.style.transitionTimingFunction=k,M&&M(s)}),ye=s=>{g==="auto"&&(L.current=setTimeout(s,P.current||0)),d&&d(z.current,s)};return e.jsx(A,h({in:E,onEnter:me,onEntered:fe,onEntering:xe,onExit:ge,onExited:je,onExiting:ve,addEndListener:ye,nodeRef:z,timeout:g==="auto"?null:g},Z,{children:(s,p)=>e.jsx(Je,h({as:u,className:Re($.root,C,{entered:$.entered,exited:!E&&r==="0px"&&$.hidden}[s]),style:h({[o?"minWidth":"minHeight"]:r},I),ownerState:h({},v,{state:s}),ref:W},p,{children:e.jsx(Ve,{ownerState:h({},v,{state:s}),className:$.wrapper,ref:x,children:e.jsx(Xe,{ownerState:h({},v,{state:s}),className:$.wrapperInner,children:N})})}))}))});le.muiSupportAuto=!0;const Ke=le;var V={},Ye=O;Object.defineProperty(V,"__esModule",{value:!0});var ce=V.default=void 0,Ze=Ye(U()),et=e,tt=(0,Ze.default)((0,et.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");ce=V.default=tt;var X={},nt=O;Object.defineProperty(X,"__esModule",{value:!0});var de=X.default=void 0,st=nt(U()),rt=e,it=(0,st.default)((0,rt.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");de=X.default=it;var K={},at=O;Object.defineProperty(K,"__esModule",{value:!0});var ue=K.default=void 0,ot=at(U()),lt=e,ct=(0,ot.default)((0,lt.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"}),"QuestionMark");ue=K.default=ct;var Y={},dt=O;Object.defineProperty(Y,"__esModule",{value:!0});var pe=Y.default=void 0,ut=dt(U()),pt=e,ht=(0,ut.default)((0,pt.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");pe=Y.default=ht;const he=t=>{console.log("content",t);let n=`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;if(t){if(typeof t=="object"&&t.length>0)return t.map((i,a)=>e.jsx(y,{className:i.type&&i.type==="title"?"title":"text",variant:i.type&&i.type==="title"?"h6":"body1",children:i.text},a));if(typeof t=="string")return e.jsx(y,{children:t})}else return e.jsx(y,{children:n})},mt=({content:t,title:n,subArticleIndex:i,done:a})=>{const[d,N]=ne.useState(!1),C=()=>{N(!d)},{selectedArticle:f}=se(),u=re(),_=()=>{u(`/test/${f}/${i}`)};return e.jsxs(Fe,{elevation:a?6:0,className:"subtopics_card",children:[e.jsx(We,{avatar:a?e.jsx(pe,{}):e.jsx(ue,{}),titleTypographyProps:{variant:"h5"},title:n}),e.jsx(Ue,{component:"img",image:ie,alt:"myImage"}),!d&&!a&&e.jsx(B,{disableSpacing:!0,children:e.jsx(S,{color:"secondary",onClick:C,endIcon:e.jsx(ce,{}),"aria-expanded":d,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Дізнатися більше"})}),!a&&e.jsx(Ke,{in:d,timeout:"auto",unmountOnExit:!0,children:e.jsx(He,{children:he(t)})}),d&&e.jsx(B,{disableSpacing:!0,children:e.jsx(S,{onClick:C,endIcon:e.jsx(de,{}),color:"secondary","aria-expanded":d,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Згорнути"})}),a?null:e.jsx(B,{disableSpacing:!0,children:e.jsx(S,{onClick:_,endIcon:e.jsx(ke,{}),color:"secondary",size:"small",fullWidth:!0,variant:"outlined",className:"goToTest",children:"Пройти тест"})})]})},xt=async t=>(await oe.get(`/ep/maincontent/${t}/`)).data,ft=async t=>(await oe.get(`/ep/subtwithcontent/${t}`)).data.subtopics,gt=t=>ae(["articleContent",t],()=>xt(t),{enabled:!!t}),jt=t=>ae(["subTopicsArray",t],()=>ft(t),{enabled:!!t}),Tt=({setSelectedArticle:t,subArticleSuccessLevels:n,setSelectedSubArticle:i,historyList:a,isLoading:d})=>{console.log("historyList",a),console.log("isLoading::",d);const{selectedArticle:N}=se(),[C,f]=m.useState(null),[u,_]=m.useState([]),E=re(),c=parseInt(N||"0",10);m.useEffect(()=>{c&&t(c)},[c]);const q=()=>{E(`/test/${c}`)},T=a[c],F=Ne(),Q=Me(F.breakpoints.up("md")),{isAuthenticated:M}=De();m.useEffect(()=>{M||E("/")},[M]);const D=r=>{E(`/test/${r}`),t(r)},I=(r,o)=>{E(`/test/${r}/${o}`),t(r),i(o)},g=r=>{debugger;if(u&&u.length>0){const o=u.findIndex((w,z)=>{var W;return!((W=n[r])!=null&&W[z])});o!==-1?I(r,o):D(r)}else D(r)},{data:A,isLoading:Z}=gt(c),{data:v,isLoading:$}=jt(c);m.useEffect(()=>{f(A||null),_(v||[])},[A,v]);const b=u?u.length:0,L=n.length>0?n[c].filter(r=>r).length:0,x=b>0?L/b*100:0,P=u.length>0&&n.length>0?!n[c].every(r=>r):!1;return e.jsxs(Ie,{className:"article_page_container",children:[e.jsx(Ae,{children:e.jsxs("title",{children:[" ",d?"Loading":`Тема ${T.text}`]})}),d?e.jsx(Le,{}):e.jsxs(ne.Fragment,{children:[e.jsx(l,{className:"back_button_container",container:!0,children:e.jsx(l,{item:!0,children:e.jsx(S,{component:Pe,to:"/timeline",color:"secondary",startIcon:e.jsx(qe,{}),className:"close-button",children:"До Часопростору"})})}),e.jsx(y,{textAlign:"center",variant:"h6",className:"lesson",children:"Lesson"}),e.jsx(y,{textAlign:"center",className:"date",variant:"h5",children:T.date}),e.jsx(y,{textAlign:"center",className:"title",variant:"h4",children:T.text}),e.jsx(l,{container:!0,justifyContent:"center",children:e.jsx(l,{item:!0,xs:"auto",children:e.jsx(S,{className:"start_button_top",onClick:()=>g(c),variant:"contained",children:"Start Tests"})})}),e.jsxs(l,{container:!0,children:[e.jsxs(l,{item:!0,xs:12,md:8,children:[" ",e.jsx("img",{src:ie,alt:""})]}),e.jsxs(l,{item:!0,xs:12,md:4,children:["                        ",e.jsx("div",{className:"content_container",children:C&&he(C)})]})]}),u.length>0&&e.jsxs(l,{className:"subtopic_card_list",container:!0,justifyContent:"center",children:[e.jsx(l,{item:!0,xs:12,sm:6,md:6,xl:6,children:e.jsx(y,{variant:"h6",children:"Пройдіть додаткові завдання перед головним тестом"})}),e.jsx(l,{className:"additional_test_progress_container",container:!0,justifyContent:"center",children:e.jsxs(l,{item:!0,xs:12,sm:6,md:6,xl:4,children:[e.jsx(Oe,{color:"primary",variant:"determinate",value:x}),e.jsxs(y,{variant:"body2",gutterBottom:!0,children:["Виконано: ",L," із ",b," (",x.toFixed(2),"%)"]})]})}),e.jsx(l,{item:!0,container:!0,xs:12,spacing:2,children:u.map((r,o)=>e.jsx(l,{item:!0,xs:12,sm:6,md:4,xl:3,children:e.jsx(mt,{done:n.length>0?n[c][o]:!1,subArticleIndex:o,title:r.title,content:r.content})},o+"card"))})]}),e.jsx(l,{container:!0,justifyContent:"center",children:e.jsx(l,{item:!0,xs:12,sm:6,md:"auto",children:e.jsx(S,{disabled:P,size:"large",fullWidth:!Q,variant:"contained",className:"quiz-button",onClick:q,children:"Завершити рівень"})})})]})]})};export{Tt as default};
