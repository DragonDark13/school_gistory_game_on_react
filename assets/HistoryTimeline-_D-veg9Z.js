import{r as b,g as se,a as J,i as Q,j as u,u as ue,R as P,m as ce,T as $,B as M,b as de,c as fe,d as pe,C as me,H as he,P as ve}from"./index-Xe67jN53.js";import{C as ge,a as ye,b as be}from"./CardHeader-rts8ojgj.js";import{C as _e}from"./CardMedia-mcy60OLj.js";import{H as Te}from"./Hidden-nFBNy2cN.js";import{C as xe}from"./CardContent-CJ57NeBJ.js";import{L as Oe}from"./LinearProgress-bIAD8Iqv.js";var X={exports:{}},Ce="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",je=Ce,we=je;function Z(){}function L(){}L.resetWarningCache=Z;var Ve=function(){function e(a,t,i,c,s,o){if(o!==we){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function r(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:L,resetWarningCache:Z};return n.PropTypes=n,n};X.exports=Ve();var ee=X.exports,R={},te={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var r={}.hasOwnProperty;function n(){for(var a=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var c=typeof i;if(c==="string"||c==="number")a.push(i);else if(Array.isArray(i)){if(i.length){var s=n.apply(null,i);s&&a.push(s)}}else if(c==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){a.push(i.toString());continue}for(var o in i)r.call(i,o)&&i[o]&&a.push(o)}}}return a.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(te);var re=te.exports;R.__esModule=!0;R.default=void 0;var Se=z(b),x=z(ee),Ne=z(re);function z(e){return e&&e.__esModule?e:{default:e}}const ne=({animate:e=!0,className:r="",layout:n="2-columns",lineColor:a="#FFF",children:t})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",a),Se.default.createElement("div",{className:(0,Ne.default)(r,"vertical-timeline",{"vertical-timeline--animate":e,"vertical-timeline--two-columns":n==="2-columns","vertical-timeline--one-column-left":n==="1-column"||n==="1-column-left","vertical-timeline--one-column-right":n==="1-column-right"})},t));ne.propTypes={children:x.default.oneOfType([x.default.arrayOf(x.default.node),x.default.node]).isRequired,className:x.default.string,animate:x.default.bool,layout:x.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:x.default.string};var ke=ne;R.default=ke;var E={};function F(){return F=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},F.apply(this,arguments)}function Re(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,W(e,r)}function W(e,r){return W=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a},W(e,r)}function Ee(e,r){if(e==null)return{};var n={},a=Object.keys(e),t,i;for(i=0;i<a.length;i++)t=a[i],!(r.indexOf(t)>=0)&&(n[t]=e[t]);return n}var D=new Map,S=new WeakMap,G=0,ie=void 0;function Ie(e){ie=e}function Me(e){return e?(S.has(e)||(G+=1,S.set(e,G.toString())),S.get(e)):"0"}function Pe(e){return Object.keys(e).sort().filter(function(r){return e[r]!==void 0}).map(function(r){return r+"_"+(r==="root"?Me(e.root):e[r])}).toString()}function $e(e){var r=Pe(e),n=D.get(r);if(!n){var a=new Map,t,i=new IntersectionObserver(function(c){c.forEach(function(s){var o,l=s.isIntersecting&&t.some(function(p){return s.intersectionRatio>=p});e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=l),(o=a.get(s.target))==null||o.forEach(function(p){p(l,s)})})},e);t=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:r,observer:i,elements:a},D.set(r,n)}return n}function q(e,r,n,a){if(n===void 0&&(n={}),a===void 0&&(a=ie),typeof window.IntersectionObserver>"u"&&a!==void 0){var t=e.getBoundingClientRect();return r(a,{isIntersecting:a,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:t,intersectionRect:t,rootBounds:t}),function(){}}var i=$e(n),c=i.id,s=i.observer,o=i.elements,l=o.get(e)||[];return o.has(e)||o.set(e,l),l.push(r),s.observe(e),function(){l.splice(l.indexOf(r),1),l.length===0&&(o.delete(e),s.unobserve(e)),o.size===0&&(s.disconnect(),D.delete(c))}}var Fe=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function K(e){return typeof e.children!="function"}var k=function(e){Re(r,e);function r(a){var t;return t=e.call(this,a)||this,t.node=null,t._unobserveCb=null,t.handleNode=function(i){t.node&&(t.unobserve(),!i&&!t.props.triggerOnce&&!t.props.skip&&t.setState({inView:!!t.props.initialInView,entry:void 0})),t.node=i||null,t.observeNode()},t.handleChange=function(i,c){i&&t.props.triggerOnce&&t.unobserve(),K(t.props)||t.setState({inView:i,entry:c}),t.props.onChange&&t.props.onChange(i,c)},t.state={inView:!!a.initialInView,entry:void 0},t}var n=r.prototype;return n.componentDidUpdate=function(t){(t.rootMargin!==this.props.rootMargin||t.root!==this.props.root||t.threshold!==this.props.threshold||t.skip!==this.props.skip||t.trackVisibility!==this.props.trackVisibility||t.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},n.componentWillUnmount=function(){this.unobserve(),this.node=null},n.observeNode=function(){if(!(!this.node||this.props.skip)){var t=this.props,i=t.threshold,c=t.root,s=t.rootMargin,o=t.trackVisibility,l=t.delay,p=t.fallbackInView;this._unobserveCb=q(this.node,this.handleChange,{threshold:i,root:c,rootMargin:s,trackVisibility:o,delay:l},p)}},n.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},n.render=function(){if(!K(this.props)){var t=this.state,i=t.inView,c=t.entry;return this.props.children({inView:i,entry:c,ref:this.handleNode})}var s=this.props,o=s.children,l=s.as,p=Ee(s,Fe);return b.createElement(l||"div",F({ref:this.handleNode},p),o)},r}(b.Component);k.displayName="InView";k.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function We(e){var r=e===void 0?{}:e,n=r.threshold,a=r.delay,t=r.trackVisibility,i=r.rootMargin,c=r.root,s=r.triggerOnce,o=r.skip,l=r.initialInView,p=r.fallbackInView,m=b.useRef(),y=b.useState({inView:!!l}),_=y[0],v=y[1],C=b.useCallback(function(T){m.current!==void 0&&(m.current(),m.current=void 0),!o&&T&&(m.current=q(T,function(j,V){v({inView:j,entry:V}),V.isIntersecting&&s&&m.current&&(m.current(),m.current=void 0)},{root:c,rootMargin:i,threshold:n,trackVisibility:t,delay:a},p))},[Array.isArray(n)?n.toString():n,c,i,s,o,t,p,a]);b.useEffect(function(){!m.current&&_.entry&&!s&&!o&&v({inView:!!l})});var g=[C,_.inView,_.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}const De=Object.freeze(Object.defineProperty({__proto__:null,InView:k,default:k,defaultFallbackInView:Ie,observe:q,useInView:We},Symbol.toStringTag,{value:"Module"})),ze=se(De);E.__esModule=!0;E.default=void 0;var O=U(b),d=U(ee),N=U(re),qe=ze;function U(e){return e&&e.__esModule?e:{default:e}}const ae=({children:e="",className:r="",contentArrowStyle:n=null,contentStyle:a=null,date:t="",dateClassName:i="",icon:c=null,iconClassName:s="",iconOnClick:o=null,onTimelineElementClick:l=null,iconStyle:p=null,id:m="",position:y="",style:_=null,textClassName:v="",intersectionObserverProps:C={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:g=!1})=>O.default.createElement(qe.InView,C,({inView:T,ref:j})=>O.default.createElement("div",{ref:j,id:m,className:(0,N.default)(r,"vertical-timeline-element",{"vertical-timeline-element--left":y==="left","vertical-timeline-element--right":y==="right","vertical-timeline-element--no-children":e===""}),style:_},O.default.createElement(O.default.Fragment,null,O.default.createElement("span",{style:p,onClick:o,className:(0,N.default)(s,"vertical-timeline-element-icon",{"bounce-in":T||g,"is-hidden":!(T||g)})},c),O.default.createElement("div",{style:a,onClick:l,className:(0,N.default)(v,"vertical-timeline-element-content",{"bounce-in":T||g,"is-hidden":!(T||g)})},O.default.createElement("div",{style:n,className:"vertical-timeline-element-content-arrow"}),e,O.default.createElement("span",{className:(0,N.default)(i,"vertical-timeline-element-date")},t)))));ae.propTypes={children:d.default.oneOfType([d.default.arrayOf(d.default.node),d.default.node]),className:d.default.string,contentArrowStyle:d.default.shape({}),contentStyle:d.default.shape({}),date:d.default.node,dateClassName:d.default.string,icon:d.default.element,iconClassName:d.default.string,iconStyle:d.default.shape({}),iconOnClick:d.default.func,onTimelineElementClick:d.default.func,id:d.default.string,position:d.default.string,style:d.default.shape({}),textClassName:d.default.string,visible:d.default.bool,intersectionObserverProps:d.default.shape({root:d.default.object,rootMargin:d.default.string,threshold:d.default.number,triggerOnce:d.default.bool})};var Ue=ae;E.default=Ue;var Y={VerticalTimeline:R.default,VerticalTimelineElement:E.default},B={},Be=Q;Object.defineProperty(B,"__esModule",{value:!0});var oe=B.default=void 0,Ae=Be(J()),He=u,Ge=(0,Ae.default)((0,He.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUncheckedRounded");oe=B.default=Ge;var A={},Ke=Q;Object.defineProperty(A,"__esModule",{value:!0});var le=A.default=void 0,Ye=Ke(J()),Je=u,Qe=(0,Ye.default)((0,Je.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");le=A.default=Qe;const Xe=({event:e,index:r,buttonState:n,handleExpandArticle:a,handleGoToTestNow:t,handleGoToSubArticleTest:i,successLevel:c,isAllSubtaskDone:s,totalSubtopics:o,completedSubtopics:l})=>{const p=ue();console.log("isAllSubtaskDone",s);const m=c<r,y=m?p.palette.text.disabled:p.palette.text.primary,_=o>0?l/o*100:0;return u.jsxs(P.Fragment,{children:[u.jsx(ge,{titleTypographyProps:{color:y},title:e.date}),u.jsx(_e,{className:m?"imageOpacity":"",component:"img",height:"194",image:ce,alt:"city"}),u.jsx(Te,{smDown:!0,children:u.jsx(xe,{children:u.jsx($,{color:y,component:"div",children:e.text})})}),u.jsxs(ye,{disableSpacing:!0,sx:{flexWrap:"wrap"},children:[u.jsx(M,{variant:"outlined",color:"secondary",size:"small",sx:{mb:1},fullWidth:!0,disabled:m,className:"learn-more-button",onClick:v=>{v.stopPropagation(),a(r)},children:"Дізнатися більше"}),c===r&&(s?u.jsx(M,{size:"large",variant:"contained",fullWidth:!0,disabled:m,className:"goToTest",onClick:v=>{v.stopPropagation(),t(r)},children:"Завершити рівень"}):u.jsxs(P.Fragment,{children:[u.jsxs("div",{className:"progress_bar_container",children:[u.jsx(Oe,{color:"primary",variant:"determinate",value:_}),u.jsxs($,{variant:"body2",gutterBottom:!0,children:["Виконано: ",l," із ",o," (",_.toFixed(2),"%)"]})]}),u.jsx(M,{size:"large",variant:"contained",fullWidth:!0,disabled:!n,className:"goToTest",onClick:v=>{v.stopPropagation(),i(r+1)},children:"Пройти завдання"})]}))]})]})},it=({historyList:e,buttonStates:r,successLevels:n,setSelectedArticle:a,selectedArticle:t,subArticleSuccessLevels:i,setSelectedSubArticle:c,isLoading:s})=>{const o=de();console.log("isLoading----",s);const[l,p]=b.useState(null),m=f=>f?o.palette.primary.contrastText:o.palette.primary.main,y=fe(),_=f=>{a(f),y(`/article/${f}`)},v=f=>{y(`/test/${f}`),a(f)},C=(f,h)=>{y(`/test/${f}/${h}`),a(f),c(h)};b.useEffect(()=>{debugger;t&&e&&p(e[t].subtopics)},[t,e]);const g=f=>{a(f),p(e[f].subtopics)};b.useEffect(()=>{if(l&&l.length>0){const f=l.findIndex((h,I)=>{var w;return!((w=i[t])!=null&&w[I])});f!==-1?C(t,f):v(t)}},[l,i,t,C,v]);const T=f=>l&&l.length>0?!l||l.length>0&&l.every((h,I)=>{var w;return(w=i[f])==null?void 0:w[I]}):!0,j=f=>p?p.length:0,V=f=>i.length>0?i[f].filter(h=>h).length:0,{isAuthenticated:H}=pe();return b.useEffect(()=>{H||y("/")},[H]),u.jsxs(me,{className:"history_timeline_page",children:[u.jsx(he,{children:u.jsx("title",{children:"Часопростір"})}),u.jsx($,{className:"main_title",textAlign:"center",component:"h1",variant:"h3",children:"Часопростір"}),u.jsx(Y.VerticalTimeline,{lineColor:o.palette.primary.light,children:s?u.jsx(ve,{}):e&&e.length>0?e.map((f,h)=>u.jsx(P.Fragment,{children:u.jsx(Y.VerticalTimelineElement,{dateClassName:"hidden",className:n===h?"current_active_vertical_timeline_element":"",iconStyle:{background:o.palette.primary.light,color:m(n>h)},contentStyle:{padding:0,boxShadow:"none"},icon:n===h+1?u.jsx(le,{}):u.jsx(oe,{}),children:u.jsx(be,{elevation:n>=h?4:1,children:u.jsx(Xe,{completedSubtopics:V(h),totalSubtopics:j(),isAllSubtaskDone:T(h),event:f,index:h,buttonState:n,handleExpandArticle:_,handleGoToSubArticleTest:g,handleGoToTestNow:v,successLevel:n})})},h+"history-timeline")},h+"TimelineCard")):u.jsx("div",{children:"data not found..."})})]})};export{it as default};
