import{f as je,h as ye,s as J,_ as h,r as m,o as Ce,P as _e,Q as Ee,p as be,b as $e,F as Te,j as e,q as ze,t as we,V as ee,a as U,i as O,T as C,R as Ne,L as ne,c as se,m as re,B as N,u as Re,M as Se,d as Me,C as De,H as Ie,J as u,N as Ae,e as te}from"./index-FgZcBDIe.js";import{a as Pe,d as ke}from"./ArrowForwardIos-DOA2rQma.js";import{c as qe,C as Le,b as B,a as We}from"./CardHeader-QQxYF9FB.js";import{C as He}from"./CardMedia-qVSkW5jC.js";import{L as Fe}from"./LinearProgress-eWB4lN3c.js";function Ge(s){return je("MuiCollapse",s)}ye("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ue=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Oe=s=>{const{orientation:t,classes:i}=s,l={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return we(l,Ge,i)},Qe=J("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:i}=s;return[t.root,t[i.orientation],i.state==="entered"&&t.entered,i.state==="exited"&&!i.in&&i.collapsedSize==="0px"&&t.hidden]}})(({theme:s,ownerState:t})=>h({height:0,overflow:"hidden",transition:s.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:s.transitions.create("width")},t.state==="entered"&&h({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),Be=J("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(s,t)=>t.wrapper})(({ownerState:s})=>h({display:"flex",width:"100%"},s.orientation==="horizontal"&&{width:"auto",height:"100%"})),Je=J("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(s,t)=>t.wrapperInner})(({ownerState:s})=>h({width:"100%"},s.orientation==="horizontal"&&{width:"auto",height:"100%"})),ie=m.forwardRef(function(t,i){const l=Ce({props:t,name:"MuiCollapse"}),{addEndListener:x,children:R,className:j,collapsedSize:y="0px",component:p,easing:$,in:_,onEnter:a,onEntered:k,onEntering:f,onExit:T,onExited:q,onExiting:S,orientation:L="vertical",style:M,timeout:g=_e.standard,TransitionComponent:W=Ee}=l,H=be(l,Ue),z=h({},l,{orientation:L,collapsedSize:y}),E=Oe(z),r=$e(),c=m.useRef(),o=m.useRef(null),D=m.useRef(),b=typeof y=="number"?`${y}px`:y,I=L==="horizontal",A=I?"width":"height";m.useEffect(()=>()=>{clearTimeout(c.current)},[]);const F=m.useRef(null),ue=Te(i,F),w=n=>d=>{if(n){const v=F.current;d===void 0?n(v):n(v,d)}},Q=()=>o.current?o.current[I?"clientWidth":"clientHeight"]:0,pe=w((n,d)=>{o.current&&I&&(o.current.style.position="absolute"),n.style[A]=b,a&&a(n,d)}),he=w((n,d)=>{const v=Q();o.current&&I&&(o.current.style.position="");const{duration:P,easing:G}=ee({style:M,timeout:g,easing:$},{mode:"enter"});if(g==="auto"){const Z=r.transitions.getAutoHeightDuration(v);n.style.transitionDuration=`${Z}ms`,D.current=Z}else n.style.transitionDuration=typeof P=="string"?P:`${P}ms`;n.style[A]=`${v}px`,n.style.transitionTimingFunction=G,f&&f(n,d)}),me=w((n,d)=>{n.style[A]="auto",k&&k(n,d)}),xe=w(n=>{n.style[A]=`${Q()}px`,T&&T(n)}),fe=w(q),ge=w(n=>{const d=Q(),{duration:v,easing:P}=ee({style:M,timeout:g,easing:$},{mode:"exit"});if(g==="auto"){const G=r.transitions.getAutoHeightDuration(d);n.style.transitionDuration=`${G}ms`,D.current=G}else n.style.transitionDuration=typeof v=="string"?v:`${v}ms`;n.style[A]=b,n.style.transitionTimingFunction=P,S&&S(n)}),ve=n=>{g==="auto"&&(c.current=setTimeout(n,D.current||0)),x&&x(F.current,n)};return e.jsx(W,h({in:_,onEnter:pe,onEntered:me,onEntering:he,onExit:xe,onExited:fe,onExiting:ge,addEndListener:ve,nodeRef:F,timeout:g==="auto"?null:g},H,{children:(n,d)=>e.jsx(Qe,h({as:p,className:ze(E.root,j,{entered:E.entered,exited:!_&&b==="0px"&&E.hidden}[n]),style:h({[I?"minWidth":"minHeight"]:b},M),ownerState:h({},z,{state:n}),ref:ue},d,{children:e.jsx(Be,{ownerState:h({},z,{state:n}),className:E.wrapper,ref:o,children:e.jsx(Je,{ownerState:h({},z,{state:n}),className:E.wrapperInner,children:R})})}))}))});ie.muiSupportAuto=!0;const Ve=ie;var V={},Ke=O;Object.defineProperty(V,"__esModule",{value:!0});var ae=V.default=void 0,Xe=Ke(U()),Ye=e,Ze=(0,Xe.default)((0,Ye.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");ae=V.default=Ze;var K={},et=O;Object.defineProperty(K,"__esModule",{value:!0});var oe=K.default=void 0,tt=et(U()),nt=e,st=(0,tt.default)((0,nt.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");oe=K.default=st;var X={},rt=O;Object.defineProperty(X,"__esModule",{value:!0});var le=X.default=void 0,it=rt(U()),at=e,ot=(0,it.default)((0,at.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"}),"QuestionMark");le=X.default=ot;var Y={},lt=O;Object.defineProperty(Y,"__esModule",{value:!0});var ce=Y.default=void 0,ct=lt(U()),dt=e,ut=(0,ct.default)((0,dt.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");ce=Y.default=ut;const de=s=>{console.log("content",s);let t=`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;if(s){if(typeof s=="object"&&s.length>0)return s.map((i,l)=>e.jsx(C,{className:i.type&&i.type==="title"?"title":"text",variant:i.type&&i.type==="title"?"h6":"body1",children:i.text},l));if(typeof s=="string")return e.jsx(C,{children:s})}else return e.jsx(C,{children:t})},pt=({content:s,title:t,subArticleIndex:i,done:l})=>{const[x,R]=Ne.useState(!1),j=()=>{R(!x)},{selectedArticle:y}=ne(),p=se(),$=()=>{p(`/test/${y}/${i}`)};return e.jsxs(qe,{elevation:l?6:0,className:"subtopics_card",children:[e.jsx(Le,{avatar:l?e.jsx(ce,{}):e.jsx(le,{}),titleTypographyProps:{variant:"h5"},title:t}),e.jsx(He,{component:"img",image:re,alt:"myImage"}),!x&&!l&&e.jsx(B,{disableSpacing:!0,children:e.jsx(N,{color:"secondary",onClick:j,endIcon:e.jsx(ae,{}),"aria-expanded":x,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Дізнатися більше"})}),!l&&e.jsx(Ve,{in:x,timeout:"auto",unmountOnExit:!0,children:e.jsx(We,{children:de(s)})}),x&&e.jsx(B,{disableSpacing:!0,children:e.jsx(N,{onClick:j,endIcon:e.jsx(oe,{}),color:"secondary","aria-expanded":x,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Згорнути"})}),l?null:e.jsx(B,{disableSpacing:!0,children:e.jsx(N,{onClick:$,endIcon:e.jsx(Pe,{}),color:"secondary",size:"small",fullWidth:!0,variant:"outlined",className:"goToTest",children:"Пройти тест"})})]})},vt=({setSelectedArticle:s,subArticleSuccessLevels:t,setSelectedSubArticle:i,historyList:l,isLoading:x})=>{const{selectedArticle:R}=ne(),[j,y]=m.useState(null),[p,$]=m.useState([]),_=se(),a=parseInt(R||"0",10);m.useEffect(()=>{a&&s(a)},[a]);const k=()=>{_(`/test/${a}`)},f=l[a],T=f.subtopics?f.subtopics.length:0,q=t.length>0?t[a].filter(r=>r).length:0,S=T>0?q/T*100:0,L=f.subtopics!==void 0&&!t[a].every(r=>r),M=Re(),g=Se(M.breakpoints.up("md")),{isAuthenticated:W}=Me();m.useEffect(()=>{W||_("/")},[W]);const H=r=>{_(`/test/${r}`),s(r)},z=(r,c)=>{_(`/test/${r}/${c}`),s(r),i(c)},E=r=>{debugger;if(p&&p.length>0){const c=p.findIndex((o,D)=>{var b;return!((b=t[r])!=null&&b[D])});c!==-1?z(r,c):H(r)}else H(r)};return m.useEffect(()=>{const r=async()=>{try{const o=await te.get(`https://zelse.asuscomm.com/SchoolHistoryGame/ep/maincontent/${a}/`);y(o.data)}catch(o){console.error("Error fetching data:",o)}},c=async()=>{try{const o=await te.get(`https://zelse.asuscomm.com/SchoolHistoryGame/ep/subtwithcontent/${a}`);$(o.data.subtopics)}catch(o){console.error("Error fetching data:",o)}};a&&j===null&&r(),a&&p.length===0&&c()},[a]),console.log("subTopicsArray:::",p),e.jsxs(De,{className:"article_page_container",children:[e.jsx(Ie,{children:e.jsxs("title",{children:[" ",`Тема ${f.text}`]})}),e.jsx(u,{className:"back_button_container",container:!0,children:e.jsx(u,{item:!0,children:e.jsx(N,{component:Ae,to:"/timeline",color:"secondary",startIcon:e.jsx(ke,{}),className:"close-button",children:"До Часопростору"})})}),e.jsx(C,{textAlign:"center",variant:"h6",className:"lesson",children:"Lesson"}),e.jsx(C,{textAlign:"center",className:"date",variant:"h5",children:f.date}),e.jsx(C,{textAlign:"center",className:"title",variant:"h4",children:f.text}),e.jsx(u,{container:!0,justifyContent:"center",children:e.jsx(u,{item:!0,xs:"auto",children:e.jsx(N,{className:"start_button_top",onClick:()=>E(a),variant:"contained",children:"Start Tests"})})}),e.jsx("img",{src:re,alt:""}),e.jsx("div",{className:"content_container",children:j&&de(j)}),p.length>0&&e.jsxs(u,{className:"subtopic_card_list",container:!0,justifyContent:"center",children:[e.jsx(u,{item:!0,xs:12,sm:6,md:6,xl:6,children:e.jsx(C,{variant:"h6",children:"Пройдіть додаткові завдання перед головним тестом"})}),e.jsx(u,{className:"additional_test_progress_container",container:!0,justifyContent:"center",children:e.jsxs(u,{item:!0,xs:12,sm:6,md:6,xl:4,children:[e.jsx(Fe,{color:"primary",variant:"determinate",value:S}),e.jsxs(C,{variant:"body2",gutterBottom:!0,children:["Виконано: ",q," із ",T," (",S.toFixed(2),"%)"]})]})}),e.jsx(u,{item:!0,container:!0,xs:12,spacing:2,children:p.map((r,c)=>e.jsx(u,{item:!0,xs:12,sm:6,md:4,xl:3,children:e.jsx(pt,{done:t.length>0?t[a][c]:!1,subArticleIndex:c,title:r.title,content:r.content})},c+"card"))})]}),e.jsx(u,{container:!0,justifyContent:"center",children:e.jsx(u,{item:!0,xs:12,sm:6,md:"auto",children:e.jsx(N,{disabled:L,size:"large",fullWidth:!g,variant:"contained",className:"quiz-button",onClick:k,children:"Завершити рівень"})})})]})};export{vt as default};
