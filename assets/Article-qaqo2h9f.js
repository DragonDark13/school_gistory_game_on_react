import{a as $,i as S,j as e,T as m,R as N,J as B,c as F,m as G,B as p,F as re,O as le,Q as E,G as i,r as c,u as oe,K as ce,d as de,C as ue,H as me,P as pe,M as xe}from"./index-Xe67jN53.js";import{c as O,D as he,a as je,b as fe,d as _e}from"./ArrowForwardIos-4cmmjH44.js";import{b as ve,C as ge,a as k}from"./CardHeader-rts8ojgj.js";import{C as be}from"./CardMedia-mcy60OLj.js";import{L as Ce}from"./LinearProgress-bIAD8Iqv.js";var R={},ye=S;Object.defineProperty(R,"__esModule",{value:!0});var H=R.default=void 0,Ne=ye($()),$e=e,Se=(0,Ne.default)((0,$e.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");H=R.default=Se;var M={},Ae=S;Object.defineProperty(M,"__esModule",{value:!0});var Q=M.default=void 0,Te=Ae($()),ke=e,Re=(0,Te.default)((0,ke.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"}),"QuestionMark");Q=M.default=Re;var I={},Me=S;Object.defineProperty(I,"__esModule",{value:!0});var W=I.default=void 0,Ie=Me($()),ze=e,qe=(0,Ie.default)((0,ze.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");W=I.default=qe;var z={},De=S;Object.defineProperty(z,"__esModule",{value:!0});var w=z.default=void 0,Pe=De($()),Ee=e,Oe=(0,Pe.default)((0,Ee.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");w=z.default=Oe;const V=l=>{console.log("content",l);let x=`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;if(l){if(typeof l=="object"&&l.length>0)return l.map((o,s)=>e.jsx(m,{className:o.type&&o.type==="title"?"title":"text",variant:o.type&&o.type==="title"?"h6":"body1",children:o.text},s));if(typeof l=="string")return e.jsx(m,{children:l})}else return e.jsx(m,{children:x})},Be=({content:l,title:x,subArticleIndex:o,done:s})=>{const[d,J]=N.useState(!1),[h,v]=N.useState(!1),j=()=>{v(!1)},{selectedArticle:A}=B(),f=F(),g=()=>{f(`/test/${A}/${o}`)};return e.jsxs(N.Fragment,{children:[e.jsxs(ve,{elevation:s?6:0,className:"subtopics_card",children:[e.jsx(ge,{avatar:s?e.jsx(W,{}):e.jsx(w,{}),titleTypographyProps:{variant:"h5"},title:x}),e.jsx(be,{component:"img",image:G,alt:"myImage"}),e.jsxs("div",{className:"hover_container",children:[" ",!d&&!s&&e.jsx(k,{disableSpacing:!0,children:e.jsx(p,{color:"secondary",onClick:()=>v(!0),endIcon:e.jsx(Q,{}),"aria-expanded":d,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Дізнатися більше"})}),s?null:e.jsx(k,{disableSpacing:!0,children:e.jsx(p,{onClick:g,endIcon:e.jsx(O,{}),color:"secondary",size:"small",fullWidth:!0,variant:"outlined",className:"goToTest",children:"Пройти тест"})})]}),d&&e.jsx(k,{disableSpacing:!0,children:e.jsx(p,{onClick:()=>v(!0),endIcon:e.jsx(H,{}),color:"secondary","aria-expanded":d,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Згорнути"})})]}),e.jsxs(re,{className:"modal_with_sub_article_info",fullWidth:!0,open:h,onClose:j,children:[e.jsx(he,{variant:"h4",id:"customized-dialog-title",children:x}),e.jsx(le,{"aria-label":"close",onClick:j,sx:{position:"absolute",right:8,top:8,color:b=>b.palette.grey[500]},children:e.jsx(E,{})}),e.jsx(je,{children:V(l)}),e.jsx(fe,{children:e.jsxs(i,{container:!0,spacing:2,justifyContent:"end",children:[e.jsx(i,{item:!0,xs:"auto",children:e.jsx(p,{onClick:g,endIcon:e.jsx(O,{}),color:"primary",size:"medium",variant:"contained",className:"goToTest",children:"Пройти тест"})}),e.jsx(i,{item:!0,xs:"auto",children:e.jsx(p,{onClick:j,endIcon:e.jsx(E,{}),color:"secondary",size:"medium",variant:"outlined",children:"Close"})})]})})]})]})},we=({setSelectedArticle:l,subArticleSuccessLevels:x,setSelectedSubArticle:o,historyList:s,isLoading:d,articleContentFromApp:J,currentUser:h})=>{console.log("historyList",s),console.log("isLoading::",d);const{selectedArticle:v}=B(),[j,A]=c.useState(null);c.useState([]);const[f,g]=c.useState([]),[b,K]=c.useState(0),[L,U]=c.useState(0),[X,Y]=c.useState(0);x=[];const C=F(),a=parseInt(v||"0",10);console.log("selectedArticleNumber",a),c.useEffect(()=>{var t,n;if(a){l(a);const r=(t=s[a])==null?void 0:t.subtopics;g(r??[]);const u=(n=s[a])==null?void 0:n.content;A(typeof u=="object"?u:null)}},[a]);const Z=()=>{C(`/test/${a}`)},T=s[a],ee=oe(),te=ce(ee.breakpoints.up("md")),{isAuthenticated:q}=de();c.useEffect(()=>{q||C("/")},[q]);const D=t=>{C(`/test/${t}`),l(t)},se=(t,n)=>{C(`/test/${t}/${n}`),l(t),o(n)},ae=t=>{if(!s||a===void 0||a<0||a>=s.length)return;const n=s[a];if(n.subtopics&&n.subtopics.length>0){const r=n.subtopics.findIndex((u,_)=>{var y;return!((y=x[t])!=null&&y[_])});r!==-1?se(t,r):D(t)}else D(t)};c.useEffect(()=>{if(!s||a===void 0||a<0||a>=s.length)return;const t=s[a];if(t&&t.subtopics){const n=t.subtopics,r=n.length,u=n.reduce((_,y)=>{const P=h.tests_completed_list.find(ie=>ie.test_id===y.sub_article_test_id);return P&&P.completed&&(_+=1),_},0);Y(r),U(u),K(r>0?u/r*100:0)}},[s,a,h.tests_completed_list]);const ne=f.length>0&&!f.every(t=>{const n=h.tests_completed_list.find(r=>r.test_id===t.sub_article_test_id);return n&&n.completed});return e.jsxs(ue,{className:"article_page_container",children:[e.jsx(me,{children:e.jsxs("title",{children:[" ",d?"Loading":`Тема ${T.text}`]})}),d?e.jsx(pe,{}):e.jsxs(N.Fragment,{children:[e.jsx(i,{className:"back_button_container",container:!0,children:e.jsx(i,{item:!0,children:e.jsx(p,{component:xe,to:"/timeline",color:"secondary",startIcon:e.jsx(_e,{}),className:"close-button",children:"До Часопростору"})})}),e.jsx(m,{textAlign:"center",variant:"h6",className:"lesson",children:"Lesson"}),e.jsx(m,{textAlign:"center",className:"date",variant:"h5",children:T.date}),e.jsx(m,{textAlign:"center",className:"title",variant:"h4",children:T.text}),e.jsx(i,{container:!0,justifyContent:"center",children:e.jsx(i,{item:!0,xs:"auto",children:e.jsx(p,{className:"start_button_top",onClick:()=>ae(a),variant:"contained",children:"Start Tests"})})}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsxs(i,{item:!0,xs:12,md:5,children:[" ",e.jsx("img",{src:G,alt:""})]}),e.jsx(i,{item:!0,xs:12,md:7,children:e.jsx("div",{className:"content_container",children:s[a].content&&V(j||"")})})]}),f.length>0&&e.jsxs(i,{className:"subtopic_card_list",container:!0,justifyContent:"center",children:[e.jsx(i,{item:!0,xs:12,sm:12,md:6,xl:6,children:e.jsx(m,{variant:"h6",children:"Пройдіть додаткові завдання перед головним тестом"})}),e.jsx(i,{className:"additional_test_progress_container",container:!0,justifyContent:"center",children:e.jsxs(i,{item:!0,xs:12,sm:8,md:6,xl:4,children:[e.jsx(Ce,{color:"primary",variant:"determinate",value:b}),e.jsxs(m,{className:"linear_progress_title",variant:"body2",gutterBottom:!0,children:["Виконано: ",L," із ",X," (",b.toFixed(2),"%)"]})]})}),e.jsxs(i,{item:!0,container:!0,xs:12,spacing:2,children:[f.map((t,n)=>{console.log("Subtopic ID:",t.sub_article_test_id);const r=h.tests_completed_list.find(_=>_.test_id===t.sub_article_test_id);console.log("Test Result:",r);const u=r?r.completed:!1;return e.jsx(i,{item:!0,xs:12,sm:6,md:4,xl:3,children:e.jsx(Be,{done:u,subArticleIndex:n,title:t.title,content:t.content})},n+"card")}),"                                "]})]}),e.jsx(i,{container:!0,justifyContent:"center",children:e.jsx(i,{item:!0,xs:12,sm:6,md:"auto",children:e.jsx(p,{disabled:ne,size:"large",fullWidth:!te,variant:"contained",className:"quiz-button",onClick:Z,children:"Завершити рівень"})})})]})]})};export{we as default};
