import{e as z,f as A,s as g,_ as d,r as a,h as F,k as I,j as t,l as P,n as U,T as M,D as ke,o as we,p as Ie,q as ue,t as fe,S as Ne,v as T,w as Me,x as ze,y as Ae,z as Fe,A as Pe,a as B,i as E,E as Ue,B as _,F as Ge,c as Te,d as Be,U as Ee,b as Le,C as Oe,H as Ve,G as w,L as Q,R as ae,I as Qe}from"./index-JlX-qHCz.js";import{d as qe,a as q}from"./ArrowForwardIos-jmV-shVz.js";import{d as He}from"./Star-GTe5M5Lp.js";import{c as ne,C as We,a as ce,b as Ke}from"./CardHeader-IlWLPkCb.js";import{L as Ye}from"./LinearProgress-OSghZTVE.js";function Ze(e){return z("MuiDialogActions",e)}A("MuiDialogActions",["root","spacing"]);const Je=["className","disableSpacing"],Xe=e=>{const{classes:o,disableSpacing:s}=e;return U({root:["root",!s&&"spacing"]},Ze,o)},et=g("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,!s.disableSpacing&&o.spacing]}})(({ownerState:e})=>d({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),tt=a.forwardRef(function(o,s){const r=F({props:o,name:"MuiDialogActions"}),{className:n,disableSpacing:i=!1}=r,f=I(r,Je),c=d({},r,{disableSpacing:i}),l=Xe(c);return t.jsx(et,d({className:P(l.root,n),ownerState:c,ref:s},f))}),ot=tt;function st(e){return z("MuiDialogContent",e)}A("MuiDialogContent",["root","dividers"]);function rt(e){return z("MuiDialogTitle",e)}const at=A("MuiDialogTitle",["root"]),nt=at,ct=["className","dividers"],it=e=>{const{classes:o,dividers:s}=e;return U({root:["root",s&&"dividers"]},st,o)},lt=g("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.dividers&&o.dividers]}})(({theme:e,ownerState:o})=>d({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},o.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${nt.root} + &`]:{paddingTop:0}})),dt=a.forwardRef(function(o,s){const r=F({props:o,name:"MuiDialogContent"}),{className:n,dividers:i=!1}=r,f=I(r,ct),c=d({},r,{dividers:i}),l=it(c);return t.jsx(lt,d({className:P(l.root,n),ownerState:c,ref:s},f))}),ut=dt,ft=["className","id"],pt=e=>{const{classes:o}=e;return U({root:["root"]},rt,o)},xt=g(M,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,o)=>o.root})({padding:"16px 24px",flex:"0 0 auto"}),mt=a.forwardRef(function(o,s){const r=F({props:o,name:"MuiDialogTitle"}),{className:n,id:i}=r,f=I(r,ft),c=r,l=pt(c),{titleId:x=i}=a.useContext(ke);return t.jsx(xt,d({component:"h2",className:P(l.root,n),ownerState:c,ref:s,variant:"h6",id:i??x},f))}),vt=mt;function ht(e){return z("MuiFormGroup",e)}A("MuiFormGroup",["root","row","error"]);const gt=["className","row"],Ct=e=>{const{classes:o,row:s,error:r}=e;return U({root:["root",s&&"row",r&&"error"]},ht,o)},jt=g("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.row&&o.row]}})(({ownerState:e})=>d({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Rt=a.forwardRef(function(o,s){const r=F({props:o,name:"MuiFormGroup"}),{className:n,row:i=!1}=r,f=I(r,gt),c=we(),l=Ie({props:r,muiFormControl:c,states:["error"]}),x=d({},r,{row:i,error:l.error}),h=Ct(x);return t.jsx(jt,d({className:P(h.root,n),ownerState:x,ref:s},f))}),$t=Rt,bt=ue(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),_t=ue(t.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),St=g("span",{shouldForwardProp:fe})({position:"relative",display:"flex"}),yt=g(bt)({transform:"scale(1)"}),Dt=g(_t)(({theme:e,ownerState:o})=>d({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},o.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function pe(e){const{checked:o=!1,classes:s={},fontSize:r}=e,n=d({},e,{checked:o});return t.jsxs(St,{className:s.root,ownerState:n,children:[t.jsx(yt,{fontSize:r,className:s.background,ownerState:n}),t.jsx(Dt,{fontSize:r,className:s.dot,ownerState:n})]})}const kt=a.createContext(void 0),xe=kt;function wt(){return a.useContext(xe)}function It(e){return z("MuiRadio",e)}const Nt=A("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ie=Nt,Mt=["checked","checkedIcon","color","icon","name","onChange","size","className"],zt=e=>{const{classes:o,color:s,size:r}=e,n={root:["root",`color${T(s)}`,r!=="medium"&&`size${T(r)}`]};return d({},o,U(n,It,o))},At=g(Ne,{shouldForwardProp:e=>fe(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.size!=="medium"&&o[`size${T(s.size)}`],o[`color${T(s.color)}`]]}})(({theme:e,ownerState:o})=>d({color:(e.vars||e).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${o.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Me(o.color==="default"?e.palette.action.active:e.palette[o.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${ie.checked}`]:{color:(e.vars||e).palette[o.color].main}},{[`&.${ie.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function Ft(e,o){return typeof o=="object"&&o!==null?e===o:String(e)===String(o)}const le=t.jsx(pe,{checked:!0}),de=t.jsx(pe,{}),Pt=a.forwardRef(function(o,s){var r,n;const i=F({props:o,name:"MuiRadio"}),{checked:f,checkedIcon:c=le,color:l="primary",icon:x=de,name:h,onChange:S,size:u="medium",className:C}=i,y=I(i,Mt),j=d({},i,{color:l,size:u}),p=zt(j),R=wt();let $=f;const N=ze(S,R&&R.onChange);let D=h;return R&&(typeof $>"u"&&($=Ft(R.value,i.value)),typeof D>"u"&&(D=R.name)),t.jsx(At,d({type:"radio",icon:a.cloneElement(x,{fontSize:(r=de.props.fontSize)!=null?r:u}),checkedIcon:a.cloneElement(c,{fontSize:(n=le.props.fontSize)!=null?n:u}),ownerState:j,classes:p,name:D,checked:$,onChange:N,ref:s,className:P(p.root,C)},y))}),Ut=Pt,Gt=["actions","children","defaultValue","name","onChange","value"],Tt=a.forwardRef(function(o,s){const{actions:r,children:n,defaultValue:i,name:f,onChange:c,value:l}=o,x=I(o,Gt),h=a.useRef(null),[S,u]=Ae({controlled:l,default:i,name:"RadioGroup"});a.useImperativeHandle(r,()=>({focus:()=>{let p=h.current.querySelector("input:not(:disabled):checked");p||(p=h.current.querySelector("input:not(:disabled)")),p&&p.focus()}}),[]);const C=Fe(s,h),y=Pe(f),j=a.useMemo(()=>({name:y,onChange(p){u(p.target.value),c&&c(p,p.target.value)},value:S}),[y,c,u,S]);return t.jsx(xe.Provider,{value:j,children:t.jsx($t,d({role:"radiogroup",ref:C},x,{children:n}))})}),Bt=Tt;var H={},Et=E;Object.defineProperty(H,"__esModule",{value:!0});var me=H.default=void 0,Lt=Et(B()),Ot=t,Vt=(0,Lt.default)((0,Ot.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward");me=H.default=Vt;var W={},Qt=E;Object.defineProperty(W,"__esModule",{value:!0});var ve=W.default=void 0,qt=Qt(B()),Ht=t,Wt=(0,qt.default)((0,Ht.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");ve=W.default=Wt;var K={},Kt=E;Object.defineProperty(K,"__esModule",{value:!0});var he=K.default=void 0,Yt=Kt(B()),Zt=t,Jt=(0,Yt.default)((0,Zt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");he=K.default=Jt;var Y={},Xt=E;Object.defineProperty(Y,"__esModule",{value:!0});var ge=Y.default=void 0,eo=Xt(B()),to=t,oo=(0,eo.default)((0,to.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"}),"DoNotDisturbOn");ge=Y.default=oo;const so=({openModal:e,handleClose:o})=>t.jsxs(Ue,{open:e,onClose:o,children:[t.jsx(vt,{children:"Success!"}),t.jsx(ut,{children:t.jsx("p",{children:"Congratulations! You've successfully completed the quiz."})}),t.jsxs(ot,{children:[t.jsx(_,{onClick:o,color:"primary",children:"Close"}),t.jsx(_,{onClick:o,color:"primary",children:"Next"})]})]}),lo=({questions:e,options:o,correctAnswers:s,onAnswer:r,historyList:n,setAllAnswerIsCorrect:i,testType:f="article",setSelectedSubArticle:c})=>{var te,oe,se,re;const[l,x]=a.useState(0),[h,S]=a.useState(Array(e.length).fill("")),[u,C]=a.useState({correct:0,incorrect:0}),[y,j]=a.useState(!1),[p,R]=a.useState(!1),[$,N]=a.useState(""),[D,L]=a.useState(!1),{selectedArticle:Ce,subtopicId:je}=Ge(),[Re,Z]=a.useState(!1),m=parseInt(Ce||"0",10);let b=0,k,G;const O=Te(),{isAuthenticated:J}=Be();a.useEffect(()=>{c&&b!==void 0&&c(b)},[c,b]),f==="subArticle"?(b=parseInt(je||"0",10),console.log("selectedSubArticleNumber",b),console.log("selectedSubArticle",(oe=(te=n[m])==null?void 0:te.subtopics)==null?void 0:oe[b]),k=(re=(se=n[m])==null?void 0:se.subtopics)==null?void 0:re[b],G=k==null?void 0:k.title):(k=n[m],G=k.text,a.useEffect(()=>{J||O("/")},[J])),a.useEffect(()=>{u.correct===e.length&&(i(!0),R(!0),f==="subArticle"&&(Z(!0),setTimeout(()=>{O(`/article/${m}`)},5e3)))},[u.correct,e.length]);const $e=v=>{N(v),L(!0)},be=()=>{x(0),S(Array(e.length).fill("")),C({correct:0,incorrect:0}),j(!1),N(""),L(!1)},{currentUser:X}=a.useContext(Ee),ee=()=>{$&&($===s[l]?C({...u,correct:u.correct+1}):C({...u,incorrect:u.incorrect+1}),l<e.length-1?(x(l+1),N(""),L(!1)):(r(u),j(!0)))},_e=v=>{v.key==="Enter"&&D&&ee()},Se=v=>v?t.jsx(he,{color:"success"}):t.jsx(ge,{color:"error"}),V=Le(),ye=()=>{Z(!1),O(`/article/${m}`)};return t.jsxs(Oe,{children:[t.jsx(Ve,{children:t.jsxs("title",{children:[" ",`Тестування ${m}`]})}),t.jsxs(w,{className:"back_button_container",container:!0,justifyContent:"space-between",children:[t.jsx(w,{item:!0,children:t.jsx(_,{component:Q,to:`/article/${m}`,startIcon:t.jsx(qe,{}),children:"До бібліотеки"})}),t.jsx(w,{item:!0,children:t.jsx(_,{component:Q,to:"/timeline",endIcon:t.jsx(me,{}),color:"secondary",children:"До Часопростору"})})]}),y?t.jsxs("div",{className:"finished_container",children:[t.jsx(M,{className:"title",variant:"h4",children:"Ваші Результати:"}),t.jsxs(ne,{className:"result_test_card",children:[t.jsx(We,{title:` ${o.length}/${u.correct}`,subheader:Se(p)}),t.jsx(ce,{children:t.jsx(Ye,{color:"success",value:Math.round(100/o.length*u.correct),variant:"determinate"})})]}),p?t.jsxs("div",{children:[t.jsx(w,{className:"icon_container",container:!0,justifyContent:"center",children:t.jsx(w,{item:!0,children:t.jsx(He,{fontSize:"large",color:"success",className:"pulse"})})}),f==="article"&&t.jsxs(ne,{sx:{background:V.palette.secondary.light},children:[t.jsx(ce,{children:t.jsxs(M,{sx:{color:V.palette.text.secondary},children:["Вітаю, ",t.jsx(M,{component:"span",variant:"subtitle1",children:X?X.name:"Невідомий"}),", ви досягли наступного рівня. Тепер ви можити відправитися у наступний пункт нашої подорожі у часі."]})}),t.jsx(Ke,{children:t.jsx(_,{component:Q,to:`/article/${m+1}`,fullWidth:!0,startIcon:t.jsx(q,{}),color:"secondary",endIcon:t.jsx(q,{}),variant:"contained",size:"large",children:m!==null?n[m+1].date:"Помилка у машині часу"})})]})]}):t.jsxs(ae.Fragment,{children:[t.jsx(M,{className:"textMessage",children:"Не сумуйте. Підготуйтесь та спробуйте знову"}),t.jsx(_,{fullWidth:!0,endIcon:t.jsx(ve,{}),variant:"contained",onClick:be,children:"Пройти ще раз"})]})]}):t.jsxs(ae.Fragment,{children:[t.jsxs("h1",{children:["Тема: ",G&&G]}),t.jsx("p",{children:e[l]}),t.jsx(Bt,{name:"radio-buttons-group",children:o[l].map((v,De)=>t.jsx(Qe,{className:V+" answer-quiz-button",onKeyPress:_e,onClick:()=>$e(v),control:t.jsx(Ut,{checked:$===v}),label:v,value:v},De+"button"))}),t.jsx(w,{container:!0,justifyContent:"center",mt:2,children:t.jsx(_,{endIcon:t.jsx(q,{}),variant:"contained",size:"large",onClick:ee,disabled:!D,children:"Продовжити"})})]}),t.jsx(so,{openModal:Re,handleClose:ye})]})};export{lo as default};
