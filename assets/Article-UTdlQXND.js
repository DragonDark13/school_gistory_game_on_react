import{a as $,i as S,j as e,T as u,R as N,J as B,c as F,m as G,B as m,F as ie,O as le,Q as E,G as n,r as c,u as oe,K as ce,d as de,C as ue,H as me,P as pe,M as xe}from"./index-LauZCCWd.js";import{c as O,D as he,a as je,b as fe,d as _e}from"./ArrowForwardIos-K-oINgWM.js";import{b as ve,C as ge,a as k}from"./CardHeader-Iq3ZkOe2.js";import{C as be}from"./CardMedia-4i4abd4M.js";import{L as Ce}from"./LinearProgress-7j4mFnhU.js";var M={},ye=S;Object.defineProperty(M,"__esModule",{value:!0});var H=M.default=void 0,Ne=ye($()),$e=e,Se=(0,Ne.default)((0,$e.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");H=M.default=Se;var R={},Ae=S;Object.defineProperty(R,"__esModule",{value:!0});var Q=R.default=void 0,Te=Ae($()),ke=e,Me=(0,Te.default)((0,ke.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"}),"QuestionMark");Q=R.default=Me;var z={},Re=S;Object.defineProperty(z,"__esModule",{value:!0});var W=z.default=void 0,ze=Re($()),Ie=e,qe=(0,ze.default)((0,Ie.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");W=z.default=qe;var I={},De=S;Object.defineProperty(I,"__esModule",{value:!0});var w=I.default=void 0,Pe=De($()),Ee=e,Oe=(0,Pe.default)((0,Ee.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");w=I.default=Oe;const V=l=>{let p=`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;if(l){if(typeof l=="object"&&l.length>0)return l.map((o,s)=>e.jsx(u,{className:o.type&&o.type==="title"?"title":"text",variant:o.type&&o.type==="title"?"h6":"body1",children:o.text},s));if(typeof l=="string")return e.jsx(u,{children:l})}else return e.jsx(u,{children:p})},Be=({content:l,title:p,subArticleIndex:o,done:s})=>{const[x,J]=N.useState(!1),[h,v]=N.useState(!1),j=()=>{v(!1)},{selectedArticle:A}=B(),f=F(),g=()=>{f(`/test/${A}/${o}`)};return e.jsxs(N.Fragment,{children:[e.jsxs(ve,{elevation:s?6:0,className:"subtopics_card",children:[e.jsx(ge,{avatar:s?e.jsx(W,{}):e.jsx(w,{}),titleTypographyProps:{variant:"h5"},title:p}),e.jsx(be,{component:"img",image:G,alt:"myImage"}),e.jsxs("div",{className:"hover_container",children:[" ",!x&&!s&&e.jsx(k,{disableSpacing:!0,children:e.jsx(m,{color:"secondary",onClick:()=>v(!0),endIcon:e.jsx(Q,{}),"aria-expanded":x,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Дізнатися більше"})}),s?null:e.jsx(k,{disableSpacing:!0,children:e.jsx(m,{onClick:g,endIcon:e.jsx(O,{}),color:"secondary",size:"small",fullWidth:!0,variant:"outlined",className:"goToTest",children:"Пройти тест"})})]}),x&&e.jsx(k,{disableSpacing:!0,children:e.jsx(m,{onClick:()=>v(!0),endIcon:e.jsx(H,{}),color:"secondary","aria-expanded":x,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Згорнути"})})]}),e.jsxs(ie,{className:"modal_with_sub_article_info",fullWidth:!0,open:h,onClose:j,children:[e.jsx(he,{variant:"h4",id:"customized-dialog-title",children:p}),e.jsx(le,{"aria-label":"close",onClick:j,sx:{position:"absolute",right:8,top:8,color:b=>b.palette.grey[500]},children:e.jsx(E,{})}),e.jsx(je,{children:V(l)}),e.jsx(fe,{children:e.jsxs(n,{container:!0,spacing:2,justifyContent:"end",children:[e.jsx(n,{item:!0,xs:"auto",children:e.jsx(m,{onClick:g,endIcon:e.jsx(O,{}),color:"primary",size:"medium",variant:"contained",className:"goToTest",children:"Пройти тест"})}),e.jsx(n,{item:!0,xs:"auto",children:e.jsx(m,{onClick:j,endIcon:e.jsx(E,{}),color:"secondary",size:"medium",variant:"outlined",children:"Close"})})]})})]})]})},we=({setSelectedArticle:l,subArticleSuccessLevels:p,setSelectedSubArticle:o,historyList:s,isLoading:x,articleContentFromApp:J,currentUser:h})=>{const{selectedArticle:v}=B(),[j,A]=c.useState(null);c.useState([]);const[f,g]=c.useState([]),[b,K]=c.useState(0),[L,U]=c.useState(0),[X,Y]=c.useState(0);p=[];const C=F(),r=parseInt(v||"0",10);c.useEffect(()=>{var i,d;l(r);const t=(i=s[r])==null?void 0:i.subtopics;g(t??[]);const a=(d=s[r])==null?void 0:d.content;A(typeof a=="object"?a:null)},[r]);const Z=()=>{debugger;C(`/test/${r}`)},T=s[r],ee=oe(),te=ce(ee.breakpoints.up("md")),{isAuthenticated:q}=de();c.useEffect(()=>{q||C("/")},[q]);const D=t=>{C(`/test/${t}`),l(t)},se=(t,a)=>{debugger;C(`/test/${t}/${a}`),l(t),o(a)},ae=t=>{if(!s||r===void 0||r<0||r>=s.length)return;const a=s[r];if(a.subtopics&&a.subtopics.length>0){const i=a.subtopics.findIndex((d,_)=>{var y;return!((y=p[t])!=null&&y[_])});i!==-1?se(t,i):D(t)}else D(t)};c.useEffect(()=>{if(!s||r>=s.length)return;const t=s[r];if(t&&t.subtopics){const a=t.subtopics,i=a.length,d=a.reduce((_,y)=>{const P=h.tests_completed_list.find(re=>re.test_id===y.sub_article_test_id);return P&&P.completed&&(_+=1),_},0);Y(i),U(d),K(i>0?d/i*100:0)}},[s,r,h.tests_completed_list]);const ne=f.length>0&&!f.every(t=>{const a=h.tests_completed_list.find(i=>i.test_id===t.sub_article_test_id);return a&&a.completed});return e.jsxs(ue,{className:"article_page_container",children:[e.jsx(me,{children:e.jsxs("title",{children:[" ",x?"Loading":`Тема ${T.text}`]})}),x?e.jsx(pe,{}):e.jsxs(N.Fragment,{children:[e.jsx(n,{className:"back_button_container",container:!0,children:e.jsx(n,{item:!0,children:e.jsx(m,{component:xe,to:"/timeline",color:"secondary",startIcon:e.jsx(_e,{}),className:"close-button",children:"До Часопростору"})})}),e.jsx(u,{textAlign:"center",variant:"h6",className:"lesson",children:"Lesson"}),e.jsx(u,{textAlign:"center",className:"date",variant:"h5",children:T.date}),e.jsx(u,{textAlign:"center",className:"title",variant:"h4",children:T.text}),e.jsx(n,{container:!0,justifyContent:"center",children:e.jsx(n,{item:!0,xs:"auto",children:e.jsx(m,{className:"start_button_top",onClick:()=>ae(r),variant:"contained",children:"Start Tests"})})}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsxs(n,{item:!0,xs:12,md:5,children:[" ",e.jsx("img",{src:G,alt:""})]}),e.jsx(n,{item:!0,xs:12,md:7,children:e.jsx("div",{className:"content_container",children:s[r].content&&V(j||"")})})]}),f.length>0&&e.jsxs(n,{className:"subtopic_card_list",container:!0,justifyContent:"center",children:[e.jsx(n,{item:!0,xs:12,sm:12,md:6,xl:6,children:e.jsx(u,{variant:"h6",children:"Пройдіть додаткові завдання перед головним тестом"})}),e.jsx(n,{className:"additional_test_progress_container",container:!0,justifyContent:"center",children:e.jsxs(n,{item:!0,xs:12,sm:8,md:6,xl:4,children:[e.jsx(Ce,{color:"primary",variant:"determinate",value:b}),e.jsxs(u,{className:"linear_progress_title",variant:"body2",gutterBottom:!0,children:["Виконано: ",L," із ",X," (",b.toFixed(2),"%)"]})]})}),e.jsxs(n,{item:!0,container:!0,xs:12,spacing:2,children:[f.map((t,a)=>{const i=h.tests_completed_list.find(_=>_.test_id===t.sub_article_test_id),d=i?i.completed:!1;return e.jsx(n,{item:!0,xs:12,sm:6,md:4,xl:3,children:e.jsx(Be,{done:d,subArticleIndex:a,title:t.title,content:t.content})},a+"card")}),"                                "]})]}),e.jsx(n,{container:!0,justifyContent:"center",children:e.jsx(n,{item:!0,xs:12,sm:6,md:"auto",children:e.jsx(m,{disabled:ne,size:"large",fullWidth:!te,variant:"contained",className:"quiz-button",onClick:Z,children:"Завершити рівень"})})})]})]})};export{we as default};
