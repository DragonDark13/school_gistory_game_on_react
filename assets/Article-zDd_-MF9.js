import{a as v,i as _,j as e,T as u,R as g,K as P,c as B,m as F,B as m,G as te,O as ae,Q as L,I as a,r as p,u as ne,L as se,d as re,C as ie,H as oe,P as le,M as ce,V as w,e as G}from"./index-Z1d368Kf.js";import{c as O,D as de,a as ue,b as me,d as xe}from"./ArrowForwardIos-uO9GCtau.js";import{b as he,C as pe,a as N}from"./CardHeader-XHXtzQh0.js";import{C as je}from"./CardMedia-NuCz8Gs0.js";import{L as fe}from"./LinearProgress-qsoc2CKu.js";var k={},ge=_;Object.defineProperty(k,"__esModule",{value:!0});var Q=k.default=void 0,ve=ge(v()),_e=e,ye=(0,ve.default)((0,_e.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");Q=k.default=ye;var A={},Ce=_;Object.defineProperty(A,"__esModule",{value:!0});var H=A.default=void 0,be=Ce(v()),Te=e,$e=(0,be.default)((0,Te.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"}),"QuestionMark");H=A.default=$e;var M={},Ne=_;Object.defineProperty(M,"__esModule",{value:!0});var W=M.default=void 0,ke=Ne(v()),Ae=e,Me=(0,ke.default)((0,Ae.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");W=M.default=Me;var I={},Ie=_;Object.defineProperty(I,"__esModule",{value:!0});var U=I.default=void 0,Se=Ie(v()),ze=e,De=(0,Se.default)((0,ze.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");U=I.default=De;const V=t=>{console.log("content",t);let s=`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;if(t){if(typeof t=="object"&&t.length>0)return t.map((o,l)=>e.jsx(u,{className:o.type&&o.type==="title"?"title":"text",variant:o.type&&o.type==="title"?"h6":"body1",children:o.text},l));if(typeof t=="string")return e.jsx(u,{children:t})}else return e.jsx(u,{children:s})},Re=({content:t,title:s,subArticleIndex:o,done:l})=>{const[d,S]=g.useState(!1),[j,x]=g.useState(!1),i=()=>{x(!1)},{selectedArticle:f}=P(),h=B(),r=()=>{h(`/test/${f}/${o}`)};return e.jsxs(g.Fragment,{children:[e.jsxs(he,{elevation:l?6:0,className:"subtopics_card",children:[e.jsx(pe,{avatar:l?e.jsx(W,{}):e.jsx(U,{}),titleTypographyProps:{variant:"h5"},title:s}),e.jsx(je,{component:"img",image:F,alt:"myImage"}),e.jsxs("div",{className:"hover_container",children:[" ",!d&&!l&&e.jsx(N,{disableSpacing:!0,children:e.jsx(m,{color:"secondary",onClick:()=>x(!0),endIcon:e.jsx(H,{}),"aria-expanded":d,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Дізнатися більше"})}),l?null:e.jsx(N,{disableSpacing:!0,children:e.jsx(m,{onClick:r,endIcon:e.jsx(O,{}),color:"secondary",size:"small",fullWidth:!0,variant:"outlined",className:"goToTest",children:"Пройти тест"})})]}),d&&e.jsx(N,{disableSpacing:!0,children:e.jsx(m,{onClick:()=>x(!0),endIcon:e.jsx(Q,{}),color:"secondary","aria-expanded":d,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Згорнути"})})]}),e.jsxs(te,{className:"modal_with_sub_article_info",fullWidth:!0,open:j,onClose:i,children:[e.jsx(de,{variant:"h4",id:"customized-dialog-title",children:s}),e.jsx(ae,{"aria-label":"close",onClick:i,sx:{position:"absolute",right:8,top:8,color:y=>y.palette.grey[500]},children:e.jsx(L,{})}),e.jsx(ue,{children:V(t)}),e.jsx(me,{children:e.jsxs(a,{container:!0,spacing:2,justifyContent:"end",children:[e.jsx(a,{item:!0,xs:"auto",children:e.jsx(m,{onClick:r,endIcon:e.jsx(O,{}),color:"primary",size:"medium",variant:"contained",className:"goToTest",children:"Пройти тест"})}),e.jsx(a,{item:!0,xs:"auto",children:e.jsx(m,{onClick:i,endIcon:e.jsx(L,{}),color:"secondary",size:"medium",variant:"outlined",children:"Close"})})]})})]})]})},qe=async t=>(await G.get(`/ep/maincontent/${t}/`)).data,Ee=async t=>(await G.get(`/ep/subtwithcontent/${t}`)).data.subtopics,Le=t=>w(["articleContent",t],()=>qe(t),{enabled:!!t}),Oe=t=>w(["subTopicsArray",t],()=>Ee(t),{enabled:!!t}),Ue=({setSelectedArticle:t,subArticleSuccessLevels:s,setSelectedSubArticle:o,historyList:l,isLoading:d})=>{console.log("historyList",l),console.log("isLoading::",d);const{selectedArticle:S}=P(),[j,x]=p.useState(null),[i,f]=p.useState([]),h=B(),r=parseInt(S||"0",10);p.useEffect(()=>{r&&t(r)},[r]);const y=()=>{h(`/test/${r}`)},C=l[r],K=ne(),J=se(K.breakpoints.up("md")),{isAuthenticated:z}=re();p.useEffect(()=>{z||h("/")},[z]);const D=n=>{h(`/test/${n}`),t(n)},X=(n,c)=>{h(`/test/${n}/${c}`),t(n),o(c)},Y=n=>{debugger;if(i&&i.length>0){const c=i.findIndex((Fe,ee)=>{var E;return!((E=s[n])!=null&&E[ee])});c!==-1?X(n,c):D(n)}else D(n)},{data:b,isLoading:Pe}=Le(r),{data:T,isLoading:Be}=Oe(r);p.useEffect(()=>{x(b||null),f(T||[])},[b,T]);const $=i?i.length:0,R=s.length>0?s[r].filter(n=>n).length:0,q=$>0?R/$*100:0,Z=i.length>0&&s.length>0?!s[r].every(n=>n):!1;return e.jsxs(ie,{className:"article_page_container",children:[e.jsx(oe,{children:e.jsxs("title",{children:[" ",d?"Loading":`Тема ${C.text}`]})}),d?e.jsx(le,{}):e.jsxs(g.Fragment,{children:[e.jsx(a,{className:"back_button_container",container:!0,children:e.jsx(a,{item:!0,children:e.jsx(m,{component:ce,to:"/timeline",color:"secondary",startIcon:e.jsx(xe,{}),className:"close-button",children:"До Часопростору"})})}),e.jsx(u,{textAlign:"center",variant:"h6",className:"lesson",children:"Lesson"}),e.jsx(u,{textAlign:"center",className:"date",variant:"h5",children:C.date}),e.jsx(u,{textAlign:"center",className:"title",variant:"h4",children:C.text}),e.jsx(a,{container:!0,justifyContent:"center",children:e.jsx(a,{item:!0,xs:"auto",children:e.jsx(m,{className:"start_button_top",onClick:()=>Y(r),variant:"contained",children:"Start Tests"})})}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsxs(a,{item:!0,xs:12,md:5,children:[" ",e.jsx("img",{src:F,alt:""})]}),e.jsxs(a,{item:!0,xs:12,md:7,children:["                        ",e.jsx("div",{className:"content_container",children:j&&V(j)})]})]}),i.length>0&&e.jsxs(a,{className:"subtopic_card_list",container:!0,justifyContent:"center",children:[e.jsx(a,{item:!0,xs:12,sm:12,md:6,xl:6,children:e.jsx(u,{variant:"h6",children:"Пройдіть додаткові завдання перед головним тестом"})}),e.jsx(a,{className:"additional_test_progress_container",container:!0,justifyContent:"center",children:e.jsxs(a,{item:!0,xs:12,sm:8,md:6,xl:4,children:[e.jsx(fe,{color:"primary",variant:"determinate",value:q}),e.jsxs(u,{className:"linear_progress_title",variant:"body2",gutterBottom:!0,children:["Виконано: ",R," із ",$," (",q.toFixed(2),"%)"]})]})}),e.jsx(a,{item:!0,container:!0,xs:12,spacing:2,children:i.map((n,c)=>e.jsx(a,{item:!0,xs:12,sm:6,md:4,xl:3,children:e.jsx(Re,{done:s.length>0?s[r][c]:!1,subArticleIndex:c,title:n.title,content:n.content})},c+"card"))})]}),e.jsx(a,{container:!0,justifyContent:"center",children:e.jsx(a,{item:!0,xs:12,sm:6,md:"auto",children:e.jsx(m,{disabled:Z,size:"large",fullWidth:!J,variant:"contained",className:"quiz-button",onClick:y,children:"Завершити рівень"})})})]})]})};export{Ue as default};
