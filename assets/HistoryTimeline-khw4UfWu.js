import{r as _,g as se,a as Y,i as J,j as d,u as le,R as M,m as ce,T as I,B as E,b as ue,c as de,d as fe,C as pe,H as me}from"./index-qP5-KloJ.js";import{C as he,a as ve,b as ge,c as ye}from"./CardHeader-84ZSQa2h.js";import{C as be}from"./CardMedia-pYd5C2A8.js";import{H as _e}from"./Hidden-VWkGmvnS.js";import{L as Oe}from"./LinearProgress-ImLXrjmx.js";var Q={exports:{}},Te="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ce=Te,je=Ce;function X(){}function Z(){}Z.resetWarningCache=X;var we=function(){function e(i,t,a,u,c,s){if(s!==je){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function r(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:Z,resetWarningCache:X};return n.PropTypes=n,n};Q.exports=we();var L=Q.exports,k={},ee={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var r={}.hasOwnProperty;function n(){for(var i=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var u=typeof a;if(u==="string"||u==="number")i.push(a);else if(Array.isArray(a)){if(a.length){var c=n.apply(null,a);c&&i.push(c)}}else if(u==="object"){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){i.push(a.toString());continue}for(var s in a)r.call(a,s)&&a[s]&&i.push(s)}}}return i.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(ee);var te=ee.exports;k.__esModule=!0;k.default=void 0;var xe=F(_),O=F(L),Ve=F(te);function F(e){return e&&e.__esModule?e:{default:e}}const re=({animate:e=!0,className:r="",layout:n="2-columns",lineColor:i="#FFF",children:t})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),xe.default.createElement("div",{className:(0,Ve.default)(r,"vertical-timeline",{"vertical-timeline--animate":e,"vertical-timeline--two-columns":n==="2-columns","vertical-timeline--one-column-left":n==="1-column"||n==="1-column-left","vertical-timeline--one-column-right":n==="1-column-right"})},t));re.propTypes={children:O.default.oneOfType([O.default.arrayOf(O.default.node),O.default.node]).isRequired,className:O.default.string,animate:O.default.bool,layout:O.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:O.default.string};var Ne=re;k.default=Ne;var R={};function P(){return P=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},P.apply(this,arguments)}function ke(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,$(e,r)}function $(e,r){return $=Object.setPrototypeOf||function(i,t){return i.__proto__=t,i},$(e,r)}function Re(e,r){if(e==null)return{};var n={},i=Object.keys(e),t,a;for(a=0;a<i.length;a++)t=i[a],!(r.indexOf(t)>=0)&&(n[t]=e[t]);return n}var A=new Map,x=new WeakMap,H=0,ne=void 0;function Se(e){ne=e}function Ee(e){return e?(x.has(e)||(H+=1,x.set(e,H.toString())),x.get(e)):"0"}function Me(e){return Object.keys(e).sort().filter(function(r){return e[r]!==void 0}).map(function(r){return r+"_"+(r==="root"?Ee(e.root):e[r])}).toString()}function Ie(e){var r=Me(e),n=A.get(r);if(!n){var i=new Map,t,a=new IntersectionObserver(function(u){u.forEach(function(c){var s,f=c.isIntersecting&&t.some(function(m){return c.intersectionRatio>=m});e.trackVisibility&&typeof c.isVisible>"u"&&(c.isVisible=f),(s=i.get(c.target))==null||s.forEach(function(m){m(f,c)})})},e);t=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:r,observer:a,elements:i},A.set(r,n)}return n}function W(e,r,n,i){if(n===void 0&&(n={}),i===void 0&&(i=ne),typeof window.IntersectionObserver>"u"&&i!==void 0){var t=e.getBoundingClientRect();return r(i,{isIntersecting:i,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:t,intersectionRect:t,rootBounds:t}),function(){}}var a=Ie(n),u=a.id,c=a.observer,s=a.elements,f=s.get(e)||[];return s.has(e)||s.set(e,f),f.push(r),c.observe(e),function(){f.splice(f.indexOf(r),1),f.length===0&&(s.delete(e),c.unobserve(e)),s.size===0&&(c.disconnect(),A.delete(u))}}var Pe=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function G(e){return typeof e.children!="function"}var N=function(e){ke(r,e);function r(i){var t;return t=e.call(this,i)||this,t.node=null,t._unobserveCb=null,t.handleNode=function(a){t.node&&(t.unobserve(),!a&&!t.props.triggerOnce&&!t.props.skip&&t.setState({inView:!!t.props.initialInView,entry:void 0})),t.node=a||null,t.observeNode()},t.handleChange=function(a,u){a&&t.props.triggerOnce&&t.unobserve(),G(t.props)||t.setState({inView:a,entry:u}),t.props.onChange&&t.props.onChange(a,u)},t.state={inView:!!i.initialInView,entry:void 0},t}var n=r.prototype;return n.componentDidUpdate=function(t){(t.rootMargin!==this.props.rootMargin||t.root!==this.props.root||t.threshold!==this.props.threshold||t.skip!==this.props.skip||t.trackVisibility!==this.props.trackVisibility||t.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},n.componentWillUnmount=function(){this.unobserve(),this.node=null},n.observeNode=function(){if(!(!this.node||this.props.skip)){var t=this.props,a=t.threshold,u=t.root,c=t.rootMargin,s=t.trackVisibility,f=t.delay,m=t.fallbackInView;this._unobserveCb=W(this.node,this.handleChange,{threshold:a,root:u,rootMargin:c,trackVisibility:s,delay:f},m)}},n.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},n.render=function(){if(!G(this.props)){var t=this.state,a=t.inView,u=t.entry;return this.props.children({inView:a,entry:u,ref:this.handleNode})}var c=this.props,s=c.children,f=c.as,m=Re(c,Pe);return _.createElement(f||"div",P({ref:this.handleNode},m),s)},r}(_.Component);N.displayName="InView";N.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function $e(e){var r=e===void 0?{}:e,n=r.threshold,i=r.delay,t=r.trackVisibility,a=r.rootMargin,u=r.root,c=r.triggerOnce,s=r.skip,f=r.initialInView,m=r.fallbackInView,h=_.useRef(),y=_.useState({inView:!!f}),g=y[0],C=y[1],j=_.useCallback(function(o){h.current!==void 0&&(h.current(),h.current=void 0),!s&&o&&(h.current=W(o,function(l,b){C({inView:l,entry:b}),b.isIntersecting&&c&&h.current&&(h.current(),h.current=void 0)},{root:u,rootMargin:a,threshold:n,trackVisibility:t,delay:i},m))},[Array.isArray(n)?n.toString():n,u,a,c,s,t,m,i]);_.useEffect(function(){!h.current&&g.entry&&!c&&!s&&C({inView:!!f})});var v=[j,g.inView,g.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}const Ae=Object.freeze(Object.defineProperty({__proto__:null,InView:N,default:N,defaultFallbackInView:Se,observe:W,useInView:$e},Symbol.toStringTag,{value:"Module"})),Fe=se(Ae);R.__esModule=!0;R.default=void 0;var T=D(_),p=D(L),V=D(te),We=Fe;function D(e){return e&&e.__esModule?e:{default:e}}const ie=({children:e="",className:r="",contentArrowStyle:n=null,contentStyle:i=null,date:t="",dateClassName:a="",icon:u=null,iconClassName:c="",iconOnClick:s=null,onTimelineElementClick:f=null,iconStyle:m=null,id:h="",position:y="",style:g=null,textClassName:C="",intersectionObserverProps:j={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:v=!1})=>T.default.createElement(We.InView,j,({inView:o,ref:l})=>T.default.createElement("div",{ref:l,id:h,className:(0,V.default)(r,"vertical-timeline-element",{"vertical-timeline-element--left":y==="left","vertical-timeline-element--right":y==="right","vertical-timeline-element--no-children":e===""}),style:g},T.default.createElement(T.default.Fragment,null,T.default.createElement("span",{style:m,onClick:s,className:(0,V.default)(c,"vertical-timeline-element-icon",{"bounce-in":o||v,"is-hidden":!(o||v)})},u),T.default.createElement("div",{style:i,onClick:f,className:(0,V.default)(C,"vertical-timeline-element-content",{"bounce-in":o||v,"is-hidden":!(o||v)})},T.default.createElement("div",{style:n,className:"vertical-timeline-element-content-arrow"}),e,T.default.createElement("span",{className:(0,V.default)(a,"vertical-timeline-element-date")},t)))));ie.propTypes={children:p.default.oneOfType([p.default.arrayOf(p.default.node),p.default.node]),className:p.default.string,contentArrowStyle:p.default.shape({}),contentStyle:p.default.shape({}),date:p.default.node,dateClassName:p.default.string,icon:p.default.element,iconClassName:p.default.string,iconStyle:p.default.shape({}),iconOnClick:p.default.func,onTimelineElementClick:p.default.func,id:p.default.string,position:p.default.string,style:p.default.shape({}),textClassName:p.default.string,visible:p.default.bool,intersectionObserverProps:p.default.shape({root:p.default.object,rootMargin:p.default.string,threshold:p.default.number,triggerOnce:p.default.bool})};var De=ie;R.default=De;var K={VerticalTimeline:k.default,VerticalTimelineElement:R.default},z={},ze=J;Object.defineProperty(z,"__esModule",{value:!0});var ae=z.default=void 0,qe=ze(Y()),Ue=d,Be=(0,qe.default)((0,Ue.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUncheckedRounded");ae=z.default=Be;var q={},He=J;Object.defineProperty(q,"__esModule",{value:!0});var oe=q.default=void 0,Ge=He(Y()),Ke=d,Ye=(0,Ge.default)((0,Ke.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");oe=q.default=Ye;const Je=({event:e,index:r,buttonState:n,handleExpandArticle:i,handleGoToTestNow:t,handleGoToSubArticleTest:a,successLevel:u,isAllSubtaskDone:c,totalSubtopics:s,completedSubtopics:f})=>{const m=le(),h=n?m.palette.text.secondary:m.palette.text.disabled,y=s>0?f/s*100:0;return d.jsxs(M.Fragment,{children:[d.jsx(he,{titleTypographyProps:{color:h},title:e.date}),d.jsx(be,{className:n?"":"imageOpacity",component:"img",height:"194",image:ce,alt:"city"}),d.jsx(_e,{smDown:!0,children:d.jsx(ve,{children:d.jsx(I,{color:h,component:"div",children:e.text})})}),d.jsxs(ge,{disableSpacing:!0,sx:{flexWrap:"wrap"},children:[d.jsx(E,{variant:"outlined",color:"secondary",size:"small",sx:{mb:1},fullWidth:!0,disabled:!n,className:"learn-more-button",onClick:g=>{g.stopPropagation(),i(r)},children:"Дізнатися більше"}),!u&&(c?d.jsx(E,{size:"large",variant:"contained",fullWidth:!0,disabled:!n,className:"goToTest",onClick:g=>{g.stopPropagation(),t(r)},children:"Завершити рівень"}):d.jsxs(M.Fragment,{children:[d.jsxs("div",{className:"progress_bar_container",children:[d.jsx(Oe,{color:"primary",variant:"determinate",value:y}),d.jsxs(I,{variant:"body2",gutterBottom:!0,children:["Виконано: ",f," із ",s," (",y.toFixed(2),"%)"]})]}),d.jsx(E,{size:"large",variant:"contained",fullWidth:!0,disabled:!n,className:"goToTest",onClick:g=>{g.stopPropagation(),a(r)},children:"Пройти завдання"})]}))]})]})},tt=({historyList:e,buttonStates:r,successLevels:n,setSelectedArticle:i,subArticleSuccessLevels:t,setSelectedSubArticle:a})=>{const u=ue(),c=o=>o?u.palette.primary.contrastText:u.palette.primary.main,s=de(),f=o=>{i(o),s(`/article/${o}`)},m=o=>{s(`/test/${o}`),i(o)},h=(o,l)=>{s(`/test/${o}/${l}`),i(o),a(l)},y=o=>{var b;const l=(b=e[o])==null?void 0:b.subtopics;if(l&&l.length>0){const S=l.findIndex((U,w)=>{var B;return!((B=t[o])!=null&&B[w])});S!==-1?h(o,S):m(o)}},g=o=>{var l;if(e[o].subtopics!==void 0){const b=(l=e[o])==null?void 0:l.subtopics;return!b||b.length>0&&b.every((S,U)=>{var w;return(w=t[o])==null?void 0:w[U]})}else return!0},C=o=>{const l=e[o];return l.subtopics?l.subtopics.length:0},j=o=>(e[o],t[o].filter(l=>l).length),{isAuthenticated:v}=fe();return _.useEffect(()=>{v||s("/")},[v]),d.jsxs(pe,{className:"history_timeline_page",children:[d.jsx(me,{children:d.jsx("title",{children:"Часопростір"})}),d.jsx(I,{className:"main_title",textAlign:"center",component:"h1",variant:"h3",children:"Часопростір"}),d.jsx(K.VerticalTimeline,{lineColor:u.palette.primary.light,children:e.map((o,l)=>d.jsx(M.Fragment,{children:d.jsx(K.VerticalTimelineElement,{dateClassName:"hidden",className:r[l]&&!n[l]?"current_active_vertical_timeline_element":"",iconStyle:{background:u.palette.primary.light,color:c(r[l])},contentStyle:{padding:0,boxShadow:"none"},icon:n[l]?d.jsx(oe,{}):d.jsx(ae,{}),children:d.jsx(ye,{elevation:r[l]?4:1,children:d.jsx(Je,{completedSubtopics:j(l),totalSubtopics:C(l),isAllSubtaskDone:g(l),event:o,index:l,buttonState:r[l],handleExpandArticle:f,handleGoToSubArticleTest:y,handleGoToTestNow:m,successLevel:n[l]})})},l+"history-timeline")},l+"TimelineCard"))})]})};export{tt as default};
