import{e as Z,f as J,k as we,s as I,h as z,_ as C,l as De,r as o,n as X,o as U,j as e,p as ee,q as te,t as ft,v as mt,w as Fe,x as qe,S as pt,y as ht,z as xt,A as vt,D as gt,E as jt,a as q,i as B,F as Ct,B as M,b as Y,T as R,G as u,L as O,R as _t,I as yt,J as St,K as bt,M as kt,c as Rt,N as $t,O as Mt,C as zt,H as It}from"./index-FhRXRgts.js";import{D as At,a as Pt,b as Nt,d as Be}from"./ArrowBackIos-wUEpAEH2.js";import{d as wt}from"./Star-uwFX4tXq.js";import{d as Ee}from"./ArrowForwardIos-45XLeI7S.js";import{b as _e,C as Dt,a as Ft}from"./CardHeader-uWSKWb5x.js";import{C as ye}from"./CardContent-SqOU9N1a.js";import{L as Te}from"./LinearProgress-ZeSmHl5B.js";function qt(t){return Z("MuiCircularProgress",t)}J("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Bt=["className","color","disableShrink","size","style","thickness","value","variant"];let V=t=>t,Se,be,ke,Re;const $=44,Et=we(Se||(Se=V`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Tt=we(be||(be=V`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Qt=t=>{const{classes:r,variant:s,color:a,disableShrink:c}=t,i={root:["root",s,`color${z(a)}`],svg:["svg"],circle:["circle",`circle${z(s)}`,c&&"circleDisableShrink"]};return te(i,qt,r)},Gt=I("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:s}=t;return[r.root,r[s.variant],r[`color${z(s.color)}`]]}})(({ownerState:t,theme:r})=>C({display:"inline-block"},t.variant==="determinate"&&{transition:r.transitions.create("transform")},t.color!=="inherit"&&{color:(r.vars||r).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&De(ke||(ke=V`
      animation: ${0} 1.4s linear infinite;
    `),Et)),Lt=I("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,r)=>r.svg})({display:"block"}),Ot=I("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,r)=>{const{ownerState:s}=t;return[r.circle,r[`circle${z(s.variant)}`],s.disableShrink&&r.circleDisableShrink]}})(({ownerState:t,theme:r})=>C({stroke:"currentColor"},t.variant==="determinate"&&{transition:r.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&De(Re||(Re=V`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Tt)),Ut=o.forwardRef(function(r,s){const a=X({props:r,name:"MuiCircularProgress"}),{className:c,color:i="primary",disableShrink:n=!1,size:f=40,style:d,thickness:m=3.6,value:x=0,variant:j="indeterminate"}=a,y=U(a,Bt),S=C({},a,{color:i,disableShrink:n,size:f,thickness:m,value:x,variant:j}),g=Qt(S),_={},p={},h={};if(j==="determinate"){const k=2*Math.PI*(($-m)/2);_.strokeDasharray=k.toFixed(3),h["aria-valuenow"]=Math.round(x),_.strokeDashoffset=`${((100-x)/100*k).toFixed(3)}px`,p.transform="rotate(-90deg)"}return e.jsx(Gt,C({className:ee(g.root,c),style:C({width:f,height:f},p,d),ownerState:S,ref:s,role:"progressbar"},h,y,{children:e.jsx(Lt,{className:g.svg,ownerState:S,viewBox:`${$/2} ${$/2} ${$} ${$}`,children:e.jsx(Ot,{className:g.circle,style:_,ownerState:S,cx:$,cy:$,r:($-m)/2,fill:"none",strokeWidth:m})})}))}),Vt=Ut;function Ht(t){return Z("MuiFormGroup",t)}J("MuiFormGroup",["root","row","error"]);const Wt=["className","row"],Kt=t=>{const{classes:r,row:s,error:a}=t;return te({root:["root",s&&"row",a&&"error"]},Ht,r)},Yt=I("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:s}=t;return[r.root,s.row&&r.row]}})(({ownerState:t})=>C({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),Zt=o.forwardRef(function(r,s){const a=X({props:r,name:"MuiFormGroup"}),{className:c,row:i=!1}=a,n=U(a,Wt),f=ft(),d=mt({props:a,muiFormControl:f,states:["error"]}),m=C({},a,{row:i,error:d.error}),x=Kt(m);return e.jsx(Yt,C({className:ee(x.root,c),ownerState:m,ref:s},n))}),Jt=Zt,Xt=Fe(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),er=Fe(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),tr=I("span",{shouldForwardProp:qe})({position:"relative",display:"flex"}),rr=I(Xt)({transform:"scale(1)"}),sr=I(er)(({theme:t,ownerState:r})=>C({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},r.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}));function Qe(t){const{checked:r=!1,classes:s={},fontSize:a}=t,c=C({},t,{checked:r});return e.jsxs(tr,{className:s.root,ownerState:c,children:[e.jsx(rr,{fontSize:a,className:s.background,ownerState:c}),e.jsx(sr,{fontSize:a,className:s.dot,ownerState:c})]})}const or=o.createContext(void 0),Ge=or;function ar(){return o.useContext(Ge)}function nr(t){return Z("MuiRadio",t)}const cr=J("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),$e=cr,ir=["checked","checkedIcon","color","icon","name","onChange","size","className"],lr=t=>{const{classes:r,color:s,size:a}=t,c={root:["root",`color${z(s)}`,a!=="medium"&&`size${z(a)}`]};return C({},r,te(c,nr,r))},ur=I(pt,{shouldForwardProp:t=>qe(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:s}=t;return[r.root,s.size!=="medium"&&r[`size${z(s.size)}`],r[`color${z(s.color)}`]]}})(({theme:t,ownerState:r})=>C({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${r.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:ht(r.color==="default"?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},r.color!=="default"&&{[`&.${$e.checked}`]:{color:(t.vars||t).palette[r.color].main}},{[`&.${$e.disabled}`]:{color:(t.vars||t).palette.action.disabled}}));function dr(t,r){return typeof r=="object"&&r!==null?t===r:String(t)===String(r)}const Me=e.jsx(Qe,{checked:!0}),ze=e.jsx(Qe,{}),fr=o.forwardRef(function(r,s){var a,c;const i=X({props:r,name:"MuiRadio"}),{checked:n,checkedIcon:f=Me,color:d="primary",icon:m=ze,name:x,onChange:j,size:y="medium",className:S}=i,g=U(i,ir),_=C({},i,{color:d,size:y}),p=lr(_),h=ar();let k=n;const A=xt(j,h&&h.onChange);let b=x;return h&&(typeof k>"u"&&(k=dr(h.value,i.value)),typeof b>"u"&&(b=h.name)),e.jsx(ur,C({type:"radio",icon:o.cloneElement(m,{fontSize:(a=ze.props.fontSize)!=null?a:y}),checkedIcon:o.cloneElement(f,{fontSize:(c=Me.props.fontSize)!=null?c:y}),ownerState:_,classes:p,name:b,checked:k,onChange:A,ref:s,className:ee(p.root,S)},g))}),mr=fr,pr=["actions","children","defaultValue","name","onChange","value"],hr=o.forwardRef(function(r,s){const{actions:a,children:c,defaultValue:i,name:n,onChange:f,value:d}=r,m=U(r,pr),x=o.useRef(null),[j,y]=vt({controlled:d,default:i,name:"RadioGroup"});o.useImperativeHandle(a,()=>({focus:()=>{let p=x.current.querySelector("input:not(:disabled):checked");p||(p=x.current.querySelector("input:not(:disabled)")),p&&p.focus()}}),[]);const S=gt(s,x),g=jt(n),_=o.useMemo(()=>({name:g,onChange(p){y(p.target.value),f&&f(p,p.target.value)},value:j}),[g,f,y,j]);return e.jsx(Ge.Provider,{value:_,children:e.jsx(Jt,C({role:"radiogroup",ref:S},m,{children:c}))})}),xr=hr;var re={},vr=B;Object.defineProperty(re,"__esModule",{value:!0});var Le=re.default=void 0,gr=vr(q()),jr=e,Cr=(0,gr.default)((0,jr.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward");Le=re.default=Cr;const _r=({openModal:t,handleClose:r})=>e.jsxs(Ct,{open:t,onClose:r,children:[e.jsx(At,{children:"Success!"}),e.jsx(Pt,{children:e.jsx("p",{children:"Congratulations! You've successfully completed the quiz."})}),e.jsxs(Nt,{children:[e.jsx(M,{onClick:r,color:"primary",children:"Close"}),e.jsx(M,{onClick:r,color:"primary",children:"Next"})]})]});var se={},yr=B;Object.defineProperty(se,"__esModule",{value:!0});var oe=se.default=void 0,Sr=yr(q()),br=e,kr=(0,Sr.default)((0,br.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");oe=se.default=kr;var ae={},Rr=B;Object.defineProperty(ae,"__esModule",{value:!0});var Oe=ae.default=void 0,$r=Rr(q()),Mr=e,zr=(0,$r.default)((0,Mr.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"}),"DoNotDisturbOn");Oe=ae.default=zr;var ne={},Ir=B;Object.defineProperty(ne,"__esModule",{value:!0});var Ue=ne.default=void 0,Ar=Ir(q()),Pr=e,Nr=(0,Ar.default)((0,Pr.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");Ue=ne.default=Nr;const wr=({props:t})=>{const{results:r,percentCompleted:s,nextLevelAvailable:a,handleRetakeQuiz:c,currentUser:i,selectedArticleNumber:n,historyList:f,testType:d}=t,m=j=>j?e.jsx(oe,{color:"success"}):e.jsx(Oe,{color:"error"}),x=Y();return e.jsxs("div",{className:"finished_container",children:[e.jsx(R,{className:"title",variant:"h4",children:"Ваші Результати:"}),e.jsx(u,{container:!0,justifyContent:"center",children:e.jsx(u,{item:!0,xs:12,sm:8,md:5,children:e.jsxs(_e,{className:"result_test_card",children:[e.jsx(Dt,{title:`${r.correct}/${r.correct+r.incorrect}`,subheader:m(a)}),e.jsx(ye,{children:e.jsx(Te,{defaultValue:0,color:"success",value:s,variant:"determinate"})})]})})}),a?e.jsxs("div",{children:[e.jsx(u,{className:"icon_container",container:!0,justifyContent:"center",children:e.jsx(u,{item:!0,children:e.jsx(wt,{fontSize:"large",color:"success",className:"pulse"})})}),d==="article"&&e.jsx(u,{container:!0,justifyContent:"center",children:e.jsx(u,{item:!0,xs:12,md:6,children:e.jsxs(_e,{sx:{background:x.palette.secondary.light},children:[e.jsx(ye,{children:e.jsxs(R,{children:["Вітаю, ",e.jsx(R,{component:"span",variant:"subtitle1",children:i?i.user_name:"Невідомий"}),", ви досягли наступного рівня. Тепер ви можете відправитися у наступний пункт нашої подорожі у часі."]})}),e.jsx(Ft,{children:e.jsx(M,{component:O,to:`/article/${n+1}`,fullWidth:!0,startIcon:e.jsx(Ee,{}),color:"secondary",variant:"contained",size:"large",children:f[n+1].date})})]})})})]}):e.jsxs(_t.Fragment,{children:[e.jsx(R,{className:"textMessage",children:"Не сумуйте. Підготуйтесь та спробуйте знову"}),e.jsxs(u,{flexDirection:"row-reverse",spacing:2,container:!0,justifyContent:"space-between",children:[e.jsx(u,{item:!0,xs:12,sm:"auto",children:e.jsx(M,{size:"large",fullWidth:!0,endIcon:e.jsx(Ue,{}),variant:"contained",onClick:c,children:"Пройти ще раз"})}),e.jsx(u,{item:!0,xs:12,sm:"auto",children:e.jsx(M,{variant:"outlined",color:"secondary",size:"large",fullWidth:!0,component:O,to:`/article/${n}`,startIcon:e.jsx(Be,{}),children:"До бібліотеки"})})]})]})]})};var ce={},Dr=B;Object.defineProperty(ce,"__esModule",{value:!0});var Ve=ce.default=void 0,Fr=Dr(q()),Ie=e,qr=(0,Fr.default)([(0,Ie.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,Ie.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");Ve=ce.default=qr;const Ae=["Time's up.","Out of time.","Your time has expired.","Time expired.","Time is over."],Br=()=>{const t=Ae[Math.floor(Math.random()*Ae.length)];return e.jsxs(u,{container:!0,alignItems:"center",columnSpacing:1,children:[e.jsx(u,{item:!0,xs:"auto",children:e.jsx(Ve,{fontSize:"large",color:"error"})}),e.jsx(u,{item:!0,xs:"auto",children:e.jsx(R,{className:"random_phrase",variant:"h5",children:t})})]})};var ie={},Er=B;Object.defineProperty(ie,"__esModule",{value:!0});var He=ie.default=void 0,Tr=Er(q()),Qr=e,Gr=(0,Tr.default)((0,Qr.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");He=ie.default=Gr;const Pe=["Well done!","Excellent job!","Congratulations!","Bravo!","Fantastic!"],Ne=["Incorrect.","Wrong answer.","Try again.","Not quite.","That's incorrect."],Lr=({currentAnswerStatus:t})=>{const r=Pe[Math.floor(Math.random()*Pe.length)],s=Ne[Math.floor(Math.random()*Ne.length)];return e.jsxs(u,{container:!0,alignItems:"center",columnSpacing:1,children:[e.jsx(u,{item:!0,xs:"auto",children:t?e.jsx(oe,{fontSize:"large",color:"success"}):e.jsx(He,{fontSize:"large",color:"error"})}),e.jsx(u,{item:!0,xs:"auto",children:e.jsx(R,{className:"random_phrase",variant:"h5",children:t?r:s})})]})},Or=o.memo(({maxTimeStatic:t,answerChosen:r,setTimeIsFinished:s})=>{const[a,c]=o.useState(t);return o.useEffect(()=>{let i;console.log("startTimer");const n=()=>{i=setInterval(()=>{c(f=>f===0?(clearInterval(i),0):f-1)},1e3)};return r?clearInterval(i):(console.log("Run the timer "),n(),s(!1)),()=>{i&&clearInterval(i)}},[r]),o.useEffect(()=>{a===0&&s(!0)},[a]),e.jsxs("div",{className:"timer_progress",children:[e.jsx(Vt,{variant:"determinate",value:a/t*100,color:"secondary",thickness:5,size:60}),e.jsx(R,{color:"secondary",variant:"h6",children:a})]})}),Ur=({currentQuestion:t,quizOptions:r,selectedAnswer:s,handleAnswer:a,handleAnswerKeyPress:c,maxTimeStatic:i,answerChosen:n,currentAnswerStatus:f,isNextButtonActive:d,handleNextQuestion:m,smUp:x,currentArticleTitle:j,optionsHighlightWhenTimerIsFinished:y,optionHighlight:S,percentCompleted:g,currentQuestionText:_,setTimeIsFinished:p,timeIsFinished:h})=>{const{cx:k}=yt();return console.log("QuestionContainer start"),e.jsxs("div",{className:"question_container",children:[e.jsx(Te,{color:"primary",defaultValue:0,value:g||0,variant:"determinate"}),e.jsxs(R,{className:"quiz_title",variant:"h5",children:["Тема: ",j&&j]}),e.jsxs(u,{container:!0,rowSpacing:{xs:2,sm:0},columnSpacing:{xs:1,sm:2,md:3},alignItems:"center",justifyContent:"center",children:[e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(R,{variant:"h6",children:_})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(xr,{name:"radio-buttons-group",onKeyPress:c,children:r&&r.length>0&&r[t].map((A,b)=>e.jsx(St,{className:k(h?y(b):n?S(b):""),onKeyPress:c,onClick:()=>{!n&&!h&&a(b)},control:e.jsx(mr,{checked:s===b}),label:A,value:A,disabled:n||h},b+"button"))})})]}),e.jsxs(u,{container:!0,justifyContent:"space-between",mt:2,alignItems:"center",children:[e.jsxs(u,{className:"status_icon_container",item:!0,xs:"auto",children:[n&&e.jsx(Lr,{currentAnswerStatus:f}),!n&&(h?e.jsx(Br,{}):e.jsx(Or,{maxTimeStatic:i,answerChosen:n,setTimeIsFinished:p}))]}),e.jsx(u,{item:!0,xs:12,sm:"auto",children:e.jsx(M,{color:n?f?"success":"error":h?"error":"primary",onKeyDown:m,fullWidth:!x,className:"next_button",endIcon:e.jsx(Ee,{}),variant:"contained",size:"large",onClick:m,disabled:!d,children:"Продовжити"})})]})]})},Vr=bt()(t=>({sucessOptionSelected:{"&.MuiFormControlLabel-root.Mui-disabled":{borderColor:t.palette.success.main,color:t.palette.success.main,"& .MuiRadio-root.Mui-disabled":{color:t.palette.success.main},"& .MuiFormControlLabel-label.Mui-disabled":{color:t.palette.success.main}}},errorOptionSelected:{"&.MuiFormControlLabel-root.Mui-disabled":{borderColor:t.palette.error.main,color:t.palette.error.main,"& .MuiRadio-root.Mui-disabled":{color:t.palette.error.main},"& .MuiFormControlLabel-label.Mui-disabled":{color:t.palette.error.main}}}})),Hr=({selectedArticleNumber:t})=>e.jsxs(u,{className:"back_button_container",container:!0,justifyContent:"space-between",children:[e.jsx(u,{item:!0,children:e.jsx(M,{component:O,to:`/article/${t}`,startIcon:e.jsx(Be,{}),children:"До бібліотеки"})}),e.jsx(u,{item:!0,children:e.jsx(M,{component:O,to:"/timeline",endIcon:e.jsx(Le,{}),color:"secondary",children:"До Часопростору"})})]}),ss=({historyList:t,setAllAnswerIsCorrect:r,testType:s="article",setSelectedSubArticle:a,setCurrentUser:c,currentUser:i})=>{console.log("Current Props:",t,i),console.log("QuizBlock.tsx start");const[n,f]=o.useState(0),[d,m]=o.useState({correct:0,incorrect:0}),[x,j]=o.useState(!1),[y,S]=o.useState(!1),[g,_]=o.useState(null),[p,h]=o.useState(!1),{selectedArticle:k,subtopicId:A}=kt(),[b,le]=o.useState(!1),[H,ue]=o.useState(!1),[We,W]=o.useState(!1),Ke=30,[E,de]=o.useState(!1),[Ye,fe]=o.useState(null),[Ze,me]=o.useState(""),[v,pe]=o.useState(null),[P,Je]=o.useState([]),[Xe,et]=o.useState([]),[T,tt]=o.useState([]),[he,xe]=o.useState(0),N=parseInt(k||"0",10);let K=0;const ve=Rt(),{cx:Wr,classes:Q}=Vr(),rt=Y(),st=$t(rt.breakpoints.up("sm"));o.useEffect(()=>{if(console.log("historyList",t),t.length>0)if(console.log("testType",s),s==="subArticle"){K=parseInt(A||"0",10),a&&a(K);const l=t[N];if(l&&l.subtopics){const w=l.subtopics[K];w&&pe(w)}}else pe(t[N])},[A,t]);const ge=l=>{const w=l.map(D=>D.question)||[];Je(w),console.log("questionsArray",w);const L=l.map(D=>D.options)||[];et(L),console.log("optionsArray",L);const F=l.map(D=>D.correct_answers)||[];tt(F),console.log("correctAnswersArray",F);const dt=L.every((D,Ce)=>F[Ce]>=0&&F[Ce]<D.length);(!(L.length===F.length&&F.length===l.length)||!dt)&&console.warn("Length mismatch: optionsArray and correctAnswersArray should be of the same length as questionsArray")};o.useEffect(()=>{v&&(console.log("currentArticle1111",v),s==="subArticle"?(me("title"in v?v.title:""),fe("sub_article_test_id"in v?v.sub_article_test_id:void 0),"sub_article_test_questions"in v&&v.sub_article_test_questions&&ge(v.sub_article_test_questions)):(me("text"in v?v.text:""),fe("main_article_test_id"in v?v.main_article_test_id:void 0),"main_article_test_questions"in v&&v.main_article_test_questions&&ge(v.main_article_test_questions)))},[v]),o.useEffect(()=>{P.length>0&&xe(Math.round(100/P.length*d.correct)),d.correct===P.length&&P.length>0&&d.correct>0&&(r(!0),S(!0),s==="subArticle"&&(le(!0),setTimeout(()=>{ve(`/article/${N}`)},5e3)),Mt.post("/complete-test",{test_id:Ye,completed:!0},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(l=>{c(l.data.user_data)}).catch(l=>{console.error("Error recording test completion:",l)}))},[d.correct,P.length]);const ot=l=>{ue(!0),_(l),T[n]===l?(m({...d,correct:d.correct+1}),W(!0)):(m({...d,incorrect:d.incorrect+1}),W(!1)),h(!0)};o.useEffect(()=>{E&&!H&&(m({...d,incorrect:d.incorrect+1}),W(!1),h(!0))},[H,E]);const je=()=>{_(null),h(!1),ue(!1),de(!1)},at=()=>{f(0),m({correct:0,incorrect:0}),j(!1),xe(0),je()},G=()=>{g===null&&!E||(n<P.length-1?(f(n+1),je()):j(!0))};o.useEffect(()=>{const l=w=>{w.key==="Enter"&&G()};return document.addEventListener("keypress",l),()=>{document.removeEventListener("keypress",l)}},[G]);const nt=l=>{l.key==="Enter"&&p&&G()};Y();const ct=()=>{le(!1),ve(`/article/${N}`)},it=l=>g!==null?l===g?l===T[n]?Q.sucessOptionSelected:Q.errorOptionSelected:l===T[n]?Q.sucessOptionSelected:" ":" ",lt=l=>l===T[n]?Q.sucessOptionSelected:"",ut={results:d,percentCompleted:he,nextLevelAvailable:y,handleRetakeQuiz:at,currentUser:i,selectedArticleNumber:N,historyList:t,testType:s};return console.log(E?"timeIsFinished Yes":"timeIsFinished No"),e.jsxs(zt,{children:[e.jsx(It,{children:e.jsxs("title",{children:[" ",`Тестування ${N}`]})}),e.jsx(Hr,{selectedArticleNumber:N}),x?e.jsx(wr,{props:ut}):e.jsx(Ur,{setTimeIsFinished:de,answerChosen:H,maxTimeStatic:Ke,currentAnswerStatus:We,currentArticleTitle:Ze,currentQuestion:n,handleAnswer:ot,currentQuestionText:P[n],handleAnswerKeyPress:nt,handleNextQuestion:G,isNextButtonActive:p,optionHighlight:it,optionsHighlightWhenTimerIsFinished:lt,percentCompleted:he,quizOptions:Xe,selectedAnswer:g,smUp:st,timeIsFinished:E}),e.jsx(_r,{openModal:b,handleClose:ct})]})};export{ss as default};
