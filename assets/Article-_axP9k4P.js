import{f as Ce,h as _e,s as J,_ as h,r as m,o as Ee,P as Te,Q as $e,p as be,b as ze,F as we,j as e,q as Re,t as Se,V as te,a as G,i as U,T as y,R as ne,L as se,c as ae,m as ie,B as S,u as Ne,M as Me,d as De,C as Ie,H as Ae,J as p,N as Le,W as re,e as oe}from"./index-WkiLIseD.js";import{a as Pe,d as ke}from"./ArrowForwardIos-2btjvHbd.js";import{c as qe,C as Fe,b as B,a as We}from"./CardHeader-buIBaNvk.js";import{C as He}from"./CardMedia-dLBV-Z76.js";import{L as Ge}from"./LinearProgress-ALMnAiuO.js";function Ue(t){return Ce("MuiCollapse",t)}_e("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Oe=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Qe=t=>{const{orientation:n,classes:i}=t,r={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return Se(r,Ue,i)},Be=J("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:i}=t;return[n.root,n[i.orientation],i.state==="entered"&&n.entered,i.state==="exited"&&!i.in&&i.collapsedSize==="0px"&&n.hidden]}})(({theme:t,ownerState:n})=>h({height:0,overflow:"hidden",transition:t.transitions.create("height")},n.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},n.state==="entered"&&h({height:"auto",overflow:"visible"},n.orientation==="horizontal"&&{width:"auto"}),n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&{visibility:"hidden"})),Je=J("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,n)=>n.wrapper})(({ownerState:t})=>h({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Ve=J("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,n)=>n.wrapperInner})(({ownerState:t})=>h({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),le=m.forwardRef(function(n,i){const r=Ee({props:n,name:"MuiCollapse"}),{addEndListener:c,children:N,className:C,collapsedSize:f="0px",component:d,easing:_,in:E,onEnter:l,onEntered:q,onEntering:T,onExit:F,onExited:O,onExiting:M,orientation:D="vertical",style:I,timeout:g=Te.standard,TransitionComponent:A=$e}=r,Z=be(r,Oe),v=h({},r,{orientation:D,collapsedSize:f}),$=Qe(v),b=ze(),L=m.useRef(),x=m.useRef(null),P=m.useRef(),a=typeof f=="number"?`${f}px`:f,o=D==="horizontal",z=o?"width":"height";m.useEffect(()=>()=>{clearTimeout(L.current)},[]);const w=m.useRef(null),W=we(i,w),R=s=>u=>{if(s){const j=w.current;u===void 0?s(j):s(j,u)}},Q=()=>x.current?x.current[o?"clientWidth":"clientHeight"]:0,me=R((s,u)=>{x.current&&o&&(x.current.style.position="absolute"),s.style[z]=a,l&&l(s,u)}),xe=R((s,u)=>{const j=Q();x.current&&o&&(x.current.style.position="");const{duration:k,easing:H}=te({style:I,timeout:g,easing:_},{mode:"enter"});if(g==="auto"){const ee=b.transitions.getAutoHeightDuration(j);s.style.transitionDuration=`${ee}ms`,P.current=ee}else s.style.transitionDuration=typeof k=="string"?k:`${k}ms`;s.style[z]=`${j}px`,s.style.transitionTimingFunction=H,T&&T(s,u)}),fe=R((s,u)=>{s.style[z]="auto",q&&q(s,u)}),ge=R(s=>{s.style[z]=`${Q()}px`,F&&F(s)}),je=R(O),ve=R(s=>{const u=Q(),{duration:j,easing:k}=te({style:I,timeout:g,easing:_},{mode:"exit"});if(g==="auto"){const H=b.transitions.getAutoHeightDuration(u);s.style.transitionDuration=`${H}ms`,P.current=H}else s.style.transitionDuration=typeof j=="string"?j:`${j}ms`;s.style[z]=a,s.style.transitionTimingFunction=k,M&&M(s)}),ye=s=>{g==="auto"&&(L.current=setTimeout(s,P.current||0)),c&&c(w.current,s)};return e.jsx(A,h({in:E,onEnter:me,onEntered:fe,onEntering:xe,onExit:ge,onExited:je,onExiting:ve,addEndListener:ye,nodeRef:w,timeout:g==="auto"?null:g},Z,{children:(s,u)=>e.jsx(Be,h({as:d,className:Re($.root,C,{entered:$.entered,exited:!E&&a==="0px"&&$.hidden}[s]),style:h({[o?"minWidth":"minHeight"]:a},I),ownerState:h({},v,{state:s}),ref:W},u,{children:e.jsx(Je,{ownerState:h({},v,{state:s}),className:$.wrapper,ref:x,children:e.jsx(Ve,{ownerState:h({},v,{state:s}),className:$.wrapperInner,children:N})})}))}))});le.muiSupportAuto=!0;const Ke=le;var V={},Xe=U;Object.defineProperty(V,"__esModule",{value:!0});var ce=V.default=void 0,Ye=Xe(G()),Ze=e,et=(0,Ye.default)((0,Ze.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");ce=V.default=et;var K={},tt=U;Object.defineProperty(K,"__esModule",{value:!0});var de=K.default=void 0,nt=tt(G()),st=e,at=(0,nt.default)((0,st.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");de=K.default=at;var X={},it=U;Object.defineProperty(X,"__esModule",{value:!0});var ue=X.default=void 0,rt=it(G()),ot=e,lt=(0,rt.default)((0,ot.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"}),"QuestionMark");ue=X.default=lt;var Y={},ct=U;Object.defineProperty(Y,"__esModule",{value:!0});var pe=Y.default=void 0,dt=ct(G()),ut=e,pt=(0,dt.default)((0,ut.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");pe=Y.default=pt;const he=t=>{console.log("content",t);let n=`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;if(t){if(typeof t=="object"&&t.length>0)return t.map((i,r)=>e.jsx(y,{className:i.type&&i.type==="title"?"title":"text",variant:i.type&&i.type==="title"?"h6":"body1",children:i.text},r));if(typeof t=="string")return e.jsx(y,{children:t})}else return e.jsx(y,{children:n})},ht=({content:t,title:n,subArticleIndex:i,done:r})=>{const[c,N]=ne.useState(!1),C=()=>{N(!c)},{selectedArticle:f}=se(),d=ae(),_=()=>{d(`/test/${f}/${i}`)};return e.jsxs(qe,{elevation:r?6:0,className:"subtopics_card",children:[e.jsx(Fe,{avatar:r?e.jsx(pe,{}):e.jsx(ue,{}),titleTypographyProps:{variant:"h5"},title:n}),e.jsx(He,{component:"img",image:ie,alt:"myImage"}),!c&&!r&&e.jsx(B,{disableSpacing:!0,children:e.jsx(S,{color:"secondary",onClick:C,endIcon:e.jsx(ce,{}),"aria-expanded":c,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Дізнатися більше"})}),!r&&e.jsx(Ke,{in:c,timeout:"auto",unmountOnExit:!0,children:e.jsx(We,{children:he(t)})}),c&&e.jsx(B,{disableSpacing:!0,children:e.jsx(S,{onClick:C,endIcon:e.jsx(de,{}),color:"secondary","aria-expanded":c,size:"small",fullWidth:!0,variant:"contained",className:"learn-more-button",children:"Згорнути"})}),r?null:e.jsx(B,{disableSpacing:!0,children:e.jsx(S,{onClick:_,endIcon:e.jsx(Pe,{}),color:"secondary",size:"small",fullWidth:!0,variant:"outlined",className:"goToTest",children:"Пройти тест"})})]})},mt=async t=>(await oe.get(`https://zelse.asuscomm.com/SchoolHistoryGame/ep/maincontent/${t}/`)).data,xt=async t=>(await oe.get(`https://zelse.asuscomm.com/SchoolHistoryGame/ep/subtwithcontent/${t}`)).data.subtopics,ft=t=>re(["articleContent",t],()=>mt(t),{enabled:!!t}),gt=t=>re(["subTopicsArray",t],()=>xt(t),{enabled:!!t}),Et=({setSelectedArticle:t,subArticleSuccessLevels:n,setSelectedSubArticle:i,historyList:r,isLoading:c})=>{console.log("historyList",r),console.log("isLoading::",c);const{selectedArticle:N}=se(),[C,f]=m.useState(null),[d,_]=m.useState([]),E=ae(),l=parseInt(N||"0",10);m.useEffect(()=>{l&&t(l)},[l]);const q=()=>{E(`/test/${l}`)},T=r[l],F=Ne(),O=Me(F.breakpoints.up("md")),{isAuthenticated:M}=De();m.useEffect(()=>{M||E("/")},[M]);const D=a=>{E(`/test/${a}`),t(a)},I=(a,o)=>{E(`/test/${a}/${o}`),t(a),i(o)},g=a=>{debugger;if(d&&d.length>0){const o=d.findIndex((z,w)=>{var W;return!((W=n[a])!=null&&W[w])});o!==-1?I(a,o):D(a)}else D(a)},{data:A,isLoading:Z}=ft(l),{data:v,isLoading:$}=gt(l);m.useEffect(()=>{f(A||null),_(v||[])},[A,v]);const b=d?d.length:0,L=n.length>0?n[l].filter(a=>a).length:0,x=b>0?L/b*100:0,P=d.length>0&&n.length>0?!n[l].every(a=>a):!1;return e.jsxs(Ie,{className:"article_page_container",children:[e.jsx(Ae,{children:e.jsxs("title",{children:[" ",c?"Loading":`Тема ${T.text}`]})}),c?e.jsx("div",{children:"Loading..."}):e.jsxs(ne.Fragment,{children:[e.jsx(p,{className:"back_button_container",container:!0,children:e.jsx(p,{item:!0,children:e.jsx(S,{component:Le,to:"/timeline",color:"secondary",startIcon:e.jsx(ke,{}),className:"close-button",children:"До Часопростору"})})}),e.jsx(y,{textAlign:"center",variant:"h6",className:"lesson",children:"Lesson"}),e.jsx(y,{textAlign:"center",className:"date",variant:"h5",children:T.date}),e.jsx(y,{textAlign:"center",className:"title",variant:"h4",children:T.text}),e.jsx(p,{container:!0,justifyContent:"center",children:e.jsx(p,{item:!0,xs:"auto",children:e.jsx(S,{className:"start_button_top",onClick:()=>g(l),variant:"contained",children:"Start Tests"})})}),e.jsx("img",{src:ie,alt:""}),e.jsx("div",{className:"content_container",children:C&&he(C)}),d.length>0&&e.jsxs(p,{className:"subtopic_card_list",container:!0,justifyContent:"center",children:[e.jsx(p,{item:!0,xs:12,sm:6,md:6,xl:6,children:e.jsx(y,{variant:"h6",children:"Пройдіть додаткові завдання перед головним тестом"})}),e.jsx(p,{className:"additional_test_progress_container",container:!0,justifyContent:"center",children:e.jsxs(p,{item:!0,xs:12,sm:6,md:6,xl:4,children:[e.jsx(Ge,{color:"primary",variant:"determinate",value:x}),e.jsxs(y,{variant:"body2",gutterBottom:!0,children:["Виконано: ",L," із ",b," (",x.toFixed(2),"%)"]})]})}),e.jsx(p,{item:!0,container:!0,xs:12,spacing:2,children:d.map((a,o)=>e.jsx(p,{item:!0,xs:12,sm:6,md:4,xl:3,children:e.jsx(ht,{done:n.length>0?n[l][o]:!1,subArticleIndex:o,title:a.title,content:a.content})},o+"card"))})]}),e.jsx(p,{container:!0,justifyContent:"center",children:e.jsx(p,{item:!0,xs:12,sm:6,md:"auto",children:e.jsx(S,{disabled:P,size:"large",fullWidth:!O,variant:"contained",className:"quiz-button",onClick:q,children:"Завершити рівень"})})})]})]})};export{Et as default};
